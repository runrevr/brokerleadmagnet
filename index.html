<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hidden Risk Revealed - Brokerage Risk Assessment</title>

    <!-- React and Dependencies -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Manrope:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'spruce': '#264E36',
                        'dark-green': '#1A3A2C',
                        'forest-green': '#27543D',
                        'river-stone': '#78909C',
                        'sea-glass': '#9DBFBF',
                        'mist': '#F5F7F7',
                        'storm-gray': '#37474F',
                        'slate-blue': '#5B7A8F',
                        'lime-green': '#7BA428',
                        'fern': '#607D3B',
                        'bark-brown': '#6F4E37',
                        'signal-red': '#CC0000',
                        'amber': '#F59E0B'
                    },
                    fontFamily: {
                        'bebas': ['Bebas Neue', 'sans-serif'],
                        'manrope': ['Manrope', 'sans-serif'],
                        'jetbrains': ['JetBrains Mono', 'monospace']
                    }
                }
            }
        }
    </script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Manrope', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-weight: 400;
            line-height: 1.6;
            color: #37474F;
            background: #ffffff;
        }

        h1, h2, h3 {
            font-family: 'Bebas Neue', sans-serif;
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .font-mono, .score-display {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Print-specific styles for PDF generation */
        @media print {
            .no-print {
                display: none !important;
            }
            body {
                background: white !important;
            }
            .shadow-lg, .shadow, .shadow-sm {
                box-shadow: none !important;
            }
            canvas {
                max-width: 100%;
                page-break-inside: avoid;
            }
            .print-break {
                page-break-before: always;
            }
            .print-avoid-break {
                page-break-inside: avoid;
            }
            @page {
                margin: 0.5in;
            }
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Assessment Questions Data Structure
        const assessmentQuestions = {
            companyInfo: {
                title: "Company Information",
                questions: [
                    {
                        id: "company_name",
                        label: "Brokerage Name",
                        type: "text",
                        required: true
                    },
                    {
                        id: "agent_count",
                        label: "Number of Agents",
                        type: "select",
                        options: ["1-10", "11-25", "26-50", "51-100", "100+"],
                        required: true
                    },
                    {
                        id: "monthly_deals",
                        label: "Average Monthly Transactions",
                        type: "select",
                        options: ["1-10", "11-20", "21-50", "51-100", "101-200", "200+"],
                        required: true
                    },
                    {
                        id: "location",
                        label: "Primary Market/City",
                        type: "text",
                        required: true
                    }
                ]
            },
            transactionOversight: {
                title: "Transaction Oversight Excellence",
                questions: [
                    {
                        id: "contract_oversight",
                        label: "Who is responsible for contract oversight in your brokerage?",
                        type: "select",
                        options: ["Agent only", "Transaction Coordinator only", "Broker only", "TC + Broker share", "Everyone + AI verification"],
                        scoring: { "Agent only": 5, "Transaction Coordinator only": 10, "Broker only": 15, "TC + Broker share": 25, "Everyone + AI verification": 33 }
                    },
                    {
                        id: "document_review_time",
                        label: "How long does it take to effectively review ALL documents in a typical transaction?",
                        type: "select",
                        options: ["5+ hours", "3-5 hours", "2-3 hours", "1-2 hours", "Under 30 minutes with AI"],
                        scoring: { "5+ hours": 5, "3-5 hours": 10, "2-3 hours": 15, "1-2 hours": 25, "Under 30 minutes with AI": 33 }
                    },
                    {
                        id: "agent_document_reading",
                        label: "Are agents expected to read every line of HOAs, title reports, inspection reports? If yes, what percentage actually do it?",
                        type: "select",
                        options: ["Not expected to", "Expected but <25% do", "Expected but 25-50% do", "Expected but 50-75% do", "Expected and >75% do", "AI reads everything, agents review summaries"],
                        scoring: { "Not expected to": 0, "Expected but <25% do": 5, "Expected but 25-50% do": 10, "Expected but 50-75% do": 20, "Expected and >75% do": 28, "AI reads everything, agents review summaries": 34 }
                    }
                ]
            },
            operationalSystems: {
                title: "Operational Systems Maturity",
                questions: [
                    {
                        id: "deadline_tracking_system",
                        label: "Do you have a system to track all transaction deadlines?",
                        type: "select",
                        options: ["No system - agent responsibility", "Manual calendars/spreadsheets", "Basic transaction software", "Automated deadline tracking", "AI-extracted with smart alerts"],
                        scoring: { "No system - agent responsibility": 5, "Manual calendars/spreadsheets": 10, "Basic transaction software": 20, "Automated deadline tracking": 28, "AI-extracted with smart alerts": 33 }
                    },
                    {
                        id: "missed_deadlines",
                        label: "How many transaction deadlines were missed last quarter?",
                        type: "select",
                        options: ["Not tracked", "10+", "6-10", "3-5", "1-2", "None"],
                        scoring: { "Not tracked": 0, "10+": 5, "6-10": 10, "3-5": 18, "1-2": 25, "None": 33 }
                    },
                    {
                        id: "deal_losses",
                        label: "Have you ever lost a deal or made brokerage concessions at closing due to issues identified too late?",
                        type: "select",
                        options: ["Too often to count", "Frequently (10+ times per year)", "Regularly (6-10 times per year)", "Occasionally (3-5 times per year)", "Rarely (1-2 times per year)", "Never happens"],
                        scoring: { "Too often to count": 0, "Frequently (10+ times per year)": 5, "Regularly (6-10 times per year)": 10, "Occasionally (3-5 times per year)": 18, "Rarely (1-2 times per year)": 25, "Never happens": 34 }
                    }
                ]
            },
            knowledgeManagement: {
                title: "Knowledge Management & Training",
                questions: [
                    {
                        id: "agent_training_frequency",
                        label: "How often do you conduct mandatory agent training on forms/contracts?",
                        type: "select",
                        options: ["Never - agents learn on their own", "Annually", "Quarterly", "Monthly", "Weekly/Ongoing", "AI provides real-time guidance instead"],
                        scoring: { "Never - agents learn on their own": 0, "Annually": 10, "Quarterly": 18, "Monthly": 25, "Weekly/Ongoing": 30, "AI provides real-time guidance instead": 33 }
                    },
                    {
                        id: "procedure_questions",
                        label: "When agents have questions about company procedures or standards, they:",
                        type: "select",
                        options: ["Figure it out themselves", "Ask whoever's available", "Check scattered emails/documents", "Access a central knowledge base", "Get instant AI-powered answers"],
                        scoring: { "Figure it out themselves": 5, "Ask whoever's available": 10, "Check scattered emails/documents": 15, "Access a central knowledge base": 25, "Get instant AI-powered answers": 33 }
                    },
                    {
                        id: "legal_questions",
                        label: "When contract or state law questions arise, your agents:",
                        type: "select",
                        options: ["Google it", "Call the broker (interrupting their day)", "Consult external legal hotline ($$$)", "Search internal resources", "AI instantly provides cited answers"],
                        scoring: { "Google it": 2, "Call the broker (interrupting their day)": 8, "Consult external legal hotline ($$$)": 15, "Search internal resources": 23, "AI instantly provides cited answers": 34 }
                    }
                ]
            },
            clientExperience: {
                title: "Client Experience & Transparency",
                questions: [
                    {
                        id: "client_deadlines_breakdown",
                        label: "Do you provide clients with a comprehensive breakdown of their deadlines and responsibilities?",
                        type: "select",
                        options: ["No formal system", "Agent explains verbally", "Email key dates as needed", "Standard timeline template", "Digital portal with all dates", "AI-powered dashboard with alerts"],
                        scoring: { "No formal system": 0, "Agent explains verbally": 8, "Email key dates as needed": 15, "Standard timeline template": 22, "Digital portal with all dates": 28, "AI-powered dashboard with alerts": 33 }
                    },
                    {
                        id: "client_document_understanding",
                        label: "What percentage of your clients actually read and understand all transaction documents?",
                        type: "select",
                        options: ["Under 10%", "10-25%", "25-50%", "50-75%", "Over 75%", "We ensure understanding with AI summaries"],
                        scoring: { "Under 10%": 3, "10-25%": 10, "25-50%": 17, "50-75%": 24, "Over 75%": 29, "We ensure understanding with AI summaries": 33 }
                    },
                    {
                        id: "brokerage_liability",
                        label: "How much liability does your brokerage assume for ensuring clients fully understand all documents?",
                        type: "select",
                        options: ["Complete liability - it's on us", "Significant liability", "Moderate - shared with agent", "Minimal - client signs they've read", "Protected - we document everything", "Protected with AI-verified comprehension"],
                        scoring: { "Complete liability - it's on us": 5, "Significant liability": 10, "Moderate - shared with agent": 18, "Minimal - client signs they've read": 23, "Protected - we document everything": 28, "Protected with AI-verified comprehension": 34 }
                    }
                ]
            },
            riskManagement: {
                title: "Risk Management & Protection",
                questions: [
                    {
                        id: "revenue_loss",
                        label: "Estimated revenue lost to missed deadlines/failed deals last year?",
                        type: "select",
                        options: ["Not calculated", "Over $500K", "$200K-$500K", "$100K-$200K", "$50K-$100K", "Under $50K"],
                        scoring: { "Not calculated": 0, "Over $500K": 5, "$200K-$500K": 12, "$100K-$200K": 20, "$50K-$100K": 27, "Under $50K": 33 }
                    },
                    {
                        id: "eo_claims",
                        label: "Number of E&O claims in last 3 years?",
                        type: "select",
                        options: ["5+", "3-4", "1-2", "0", "0 with proactive monitoring"],
                        scoring: { "5+": 5, "3-4": 15, "1-2": 25, "0": 30, "0 with proactive monitoring": 34 }
                    }
                ]
            },
            growthReadiness: {
                title: "BONUS: Growth Acceleration",
                questions: [
                    {
                        id: "verified_seller_leads",
                        label: "If you could receive 100% verified seller leads (only pay at contract), would you be interested?",
                        type: "select",
                        options: ["No, we can't handle more volume", "Probably not", "Maybe, need more details", "Yes, depending on pricing", "Absolutely - sign us up"],
                        scoring: { "No, we can't handle more volume": 0, "Probably not": 5, "Maybe, need more details": 15, "Yes, depending on pricing": 25, "Absolutely - sign us up": 33 }
                    },
                    {
                        id: "lead_followup_system",
                        label: "Do you have a system to ensure agents follow up with leads in a timely manner?",
                        type: "select",
                        options: ["No system - trust agents to handle", "Manual tracking by managers", "Basic CRM reminders", "Automated follow-up sequences", "AI-powered lead nurturing", "Full automation with accountability"],
                        scoring: { "No system - trust agents to handle": 0, "Manual tracking by managers": 8, "Basic CRM reminders": 15, "Automated follow-up sequences": 22, "AI-powered lead nurturing": 28, "Full automation with accountability": 34 }
                    }
                ]
            }
        };

        // Scoring calculation function
        const calculateScores = (responses) => {
            let scores = {
                transactionOversight: 0,
                operationalSystems: 0,
                knowledgeManagement: 0,
                clientExperience: 0,
                riskManagement: 0,
                growthReadiness: 0,
                overall: 0
            };

            // Calculate category scores
            Object.entries(assessmentQuestions).forEach(([category, data]) => {
                if (category !== 'companyInfo') {
                    let categoryScore = 0;
                    data.questions.forEach(question => {
                        if (question.scoring && responses[question.id]) {
                            categoryScore += question.scoring[responses[question.id]] || 0;
                        }
                    });
                    scores[category] = categoryScore;
                }
            });

            // Calculate overall score (out of 100)
            const coreTotal = scores.transactionOversight + scores.operationalSystems +
                             scores.knowledgeManagement + scores.clientExperience +
                             scores.riskManagement;

            scores.overall = Math.round((coreTotal / 467) * 100);

            // Determine risk level
            if (scores.overall >= 85) scores.riskLevel = "LOW";
            else if (scores.overall >= 70) scores.riskLevel = "MODERATE";
            else if (scores.overall >= 50) scores.riskLevel = "HIGH";
            else scores.riskLevel = "CRITICAL";

            // Determine percentile
            if (scores.overall >= 85) scores.percentile = "Top 5%";
            else if (scores.overall >= 70) scores.percentile = "Top 25%";
            else if (scores.overall >= 50) scores.percentile = "Top 50%";
            else scores.percentile = "Bottom 50%";

            return scores;
        };

        // New Landing Page Component (based on Figma design)
        const LandingPage = ({ onStartAssessment }) => {
            return (
                <div className="bg-white">
                    {/* Hero Section */}
                    <section className="bg-gradient-to-b from-gray-50 to-white py-12 px-4">
                        <div className="max-w-4xl mx-auto text-center">
                            {/* Small label at top */}
                            <div className="text-sm text-gray-500 uppercase tracking-wider mb-6 font-manrope font-medium">
                                Hidden Risk Revealed
                            </div>

                            {/* Main Headline */}
                            <h1 className="text-4xl md:text-5xl lg:text-6xl font-bebas text-gray-800 mb-4 leading-tight">
                                WHAT 6-FIGURE MISTAKES MOST BROKERS MAKE{' '}
                                <span className="text-lime-green">(AND HOW THE TOP 10% AVOID THEM)</span>
                            </h1>

                            {/* Subheading */}
                            <p className="text-base md:text-lg text-gray-600 mb-8 max-w-2xl mx-auto font-manrope">
                                Top firms treat risk management as a competitive edge. Take the quiz to learn how your current approach stacks up—and what you're missing.
                            </p>

                            {/* CTA Button */}
                            <button
                                onClick={onStartAssessment}
                                className="inline-flex items-center gap-2 bg-slate-blue hover:bg-slate-blue/90 text-white px-8 py-4 rounded-md font-manrope font-semibold text-lg transition-all duration-200 shadow-lg hover:shadow-xl transform hover:-translate-y-0.5"
                            >
                                <svg className="w-5 h-5" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                    <path fillRule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clipRule="evenodd"/>
                                </svg>
                                Take the Free Risk Assessment
                            </button>
                        </div>
                    </section>

                    {/* Hero Image Section */}
                    <section className="py-8 px-4">
                        <div className="max-w-5xl mx-auto">
                            <img
                                src="https://images.unsplash.com/photo-1560518883-ce09059eeffa?w=1200&h=600&fit=crop"
                                alt="House with storm clouds representing hidden risks"
                                className="w-full h-auto rounded-lg shadow-2xl"
                            />
                        </div>
                    </section>

                    {/* Find Your Hidden Vulnerabilities Section */}
                    <section className="py-16 px-4 bg-white">
                        <div className="max-w-6xl mx-auto">
                            <div className="text-center mb-12">
                                <h2 className="text-3xl md:text-4xl font-bebas text-gray-800 mb-3 uppercase tracking-wide">
                                    Find Your Hidden Vulnerabilities
                                </h2>
                                <p className="text-gray-600 font-manrope max-w-2xl mx-auto">
                                    Every transaction has potential pitfalls. Our assessment helps you identify which of these common risk profiles is holding you back.
                                </p>
                            </div>

                            {/* 4 Cards Grid */}
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                                {/* Card 1 */}
                                <div className="bg-gray-50 p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow">
                                    <div className="w-12 h-12 bg-lime-green/10 rounded-lg flex items-center justify-center mb-4">
                                        <svg className="w-6 h-6 text-lime-green" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                            <path fillRule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd"/>
                                        </svg>
                                    </div>
                                    <h3 className="text-lg font-bold text-gray-800 mb-2 font-manrope">Brokerage Oversight</h3>
                                    <p className="text-sm text-gray-600 font-manrope leading-relaxed">
                                        Are missing signatures, outdated forms, and commission errors slowing you down and creating legal exposure?
                                    </p>
                                </div>

                                {/* Card 2 */}
                                <div className="bg-gray-50 p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow">
                                    <div className="w-12 h-12 bg-lime-green/10 rounded-lg flex items-center justify-center mb-4">
                                        <svg className="w-6 h-6 text-lime-green" fill="currentColor" viewBox="0 0 20 20">
                                            <path fillRule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clipRule="evenodd"/>
                                        </svg>
                                    </div>
                                    <h3 className="text-lg font-bold text-gray-800 mb-2 font-manrope">Operational Efficiency</h3>
                                    <p className="text-sm text-gray-600 font-manrope leading-relaxed">
                                        Is poor communication or tracking of offers and counter-offers leading to missed opportunities and client dissatisfaction?
                                    </p>
                                </div>

                                {/* Card 3 */}
                                <div className="bg-gray-50 p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow">
                                    <div className="w-12 h-12 bg-lime-green/10 rounded-lg flex items-center justify-center mb-4">
                                        <svg className="w-6 h-6 text-lime-green" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/>
                                        </svg>
                                    </div>
                                    <h3 className="text-lg font-bold text-gray-800 mb-2 font-manrope">Agent Training & Knowledge Base</h3>
                                    <p className="text-sm text-gray-600 font-manrope leading-relaxed">
                                        Are you struggling to manage critical dates for inspections, financing, and closing, leading to deal collapse?
                                    </p>
                                </div>

                                {/* Card 4 */}
                                <div className="bg-gray-50 p-6 rounded-lg border border-gray-200 hover:shadow-lg transition-shadow">
                                    <div className="w-12 h-12 bg-lime-green/10 rounded-lg flex items-center justify-center mb-4">
                                        <svg className="w-6 h-6 text-lime-green" fill="currentColor" viewBox="0 0 20 20">
                                            <path fillRule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clipRule="evenodd"/>
                                        </svg>
                                    </div>
                                    <h3 className="text-lg font-bold text-gray-800 mb-2 font-manrope">Client Experience</h3>
                                    <p className="text-sm text-gray-600 font-manrope leading-relaxed">
                                        Is your client data and sensitive transaction information vulnerable to data fraud and cyber threats?
                                    </p>
                                </div>
                            </div>
                        </div>
                    </section>

                    {/* Your Path to Secure Transactions */}
                    <section className="py-16 px-4 bg-gray-50">
                        <div className="max-w-6xl mx-auto">
                            <div className="text-center mb-12">
                                <h2 className="text-3xl md:text-4xl font-bebas text-gray-800 mb-3 uppercase tracking-wide">
                                    Your Path to Secure Transactions
                                </h2>
                                <p className="text-gray-600 font-manrope max-w-2xl mx-auto">
                                    In just a few minutes, gain clarity and a clear action plan to protect your business and your clients.
                                </p>
                            </div>

                            {/* 3 Step Process */}
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                                {/* Step 1 */}
                                <div className="text-center">
                                    <div className="w-16 h-16 bg-forest-green text-white rounded-full flex items-center justify-center text-2xl font-bold font-manrope mx-auto mb-4 shadow-lg">
                                        1
                                    </div>
                                    <h3 className="text-xl font-bold text-gray-800 mb-3 font-manrope">Take the Quiz</h3>
                                    <p className="text-gray-600 font-manrope text-sm leading-relaxed">
                                        Answer a short series of questions about your current transaction process. It's quick, easy, and completely confidential.
                                    </p>
                                </div>

                                {/* Step 2 */}
                                <div className="text-center">
                                    <div className="w-16 h-16 bg-forest-green text-white rounded-full flex items-center justify-center text-2xl font-bold font-manrope mx-auto mb-4 shadow-lg">
                                        2
                                    </div>
                                    <h3 className="text-xl font-bold text-gray-800 mb-3 font-manrope">Get Your Score</h3>
                                    <p className="text-gray-600 font-manrope text-sm leading-relaxed">
                                        Instantly receive your personalized Transaction Risk Score and a breakdown of your primary risk profile.
                                    </p>
                                </div>

                                {/* Step 3 */}
                                <div className="text-center">
                                    <div className="w-16 h-16 bg-forest-green text-white rounded-full flex items-center justify-center text-2xl font-bold font-manrope mx-auto mb-4 shadow-lg">
                                        3
                                    </div>
                                    <h3 className="text-xl font-bold text-gray-800 mb-3 font-manrope">Implement Solutions</h3>
                                    <p className="text-gray-600 font-manrope text-sm leading-relaxed">
                                        Get actionable insights and tailored recommendations to mitigate your specific risks and streamline your workflow.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </section>

                    {/* Bottom CTA Section */}
                    <section className="py-16 px-4 bg-gradient-to-br from-dark-green to-forest-green text-white">
                        <div className="max-w-4xl mx-auto text-center">
                            <h2 className="text-4xl md:text-5xl font-bebas mb-4 uppercase tracking-wide">
                                Stop Guessing, Start Assessing.
                            </h2>
                            <p className="text-lg text-white/90 mb-8 font-manrope max-w-2xl mx-auto">
                                Turn transaction anxiety into a competitive advantage. Discover how to protect your reputation, save money, and close more deals with confidence.
                            </p>
                            <button
                                onClick={onStartAssessment}
                                className="bg-slate-blue hover:bg-slate-blue/90 text-white px-8 py-4 rounded-md font-manrope font-semibold text-lg transition-all duration-200 shadow-xl hover:shadow-2xl transform hover:-translate-y-0.5"
                            >
                                Find My Risk Profile Now
                            </button>
                        </div>
                    </section>
                </div>
            );
        };

        // Assessment Form Component
        const AssessmentForm = ({ onComplete }) => {
            const [currentStep, setCurrentStep] = useState(0);
            const [responses, setResponses] = useState({});

            const categories = Object.keys(assessmentQuestions);
            const currentCategory = categories[currentStep];
            const currentQuestions = assessmentQuestions[currentCategory];
            const progress = ((currentStep + 1) / categories.length) * 100;

            const handleInputChange = (questionId, value) => {
                setResponses(prev => ({
                    ...prev,
                    [questionId]: value
                }));
            };

            const handleNext = () => {
                if (currentStep < categories.length - 1) {
                    setCurrentStep(currentStep + 1);
                } else {
                    const calculatedScores = calculateScores(responses);
                    onComplete(responses, calculatedScores);
                }
            };

            const handlePrevious = () => {
                if (currentStep > 0) {
                    setCurrentStep(currentStep - 1);
                }
            };

            const isCurrentStepValid = () => {
                const questions = currentQuestions.questions;
                return questions.every(q => !q.required || responses[q.id]);
            };

            return (
                <div className="min-h-screen bg-gray-50">
                    {/* Header */}
                    <header className="bg-white shadow-sm">
                        <div className="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4">
                            <h1 className="text-2xl font-bebas text-gray-800">Risk Assessment</h1>
                        </div>
                    </header>

                    {/* Progress Bar */}
                    <div className="max-w-3xl mx-auto px-4 sm:px-6 lg:px-8 mt-8">
                        <div className="bg-white rounded-lg shadow p-6">
                            <div className="mb-4">
                                <div className="flex justify-between text-sm font-manrope font-medium text-gray-700 mb-2">
                                    <span>Progress</span>
                                    <span className="font-jetbrains">{Math.round(progress)}% Complete</span>
                                </div>
                                <div className="w-full bg-gray-200 rounded-full h-2">
                                    <div
                                        className="bg-lime-green h-2 rounded-full transition-all duration-300"
                                        style={{ width: `${progress}%` }}
                                    />
                                </div>
                            </div>

                            {/* Current Section */}
                            <div className="mb-6">
                                <h2 className="text-xl font-manrope font-bold text-gray-800 mb-4">
                                    {currentQuestions.title}
                                </h2>

                                {/* Questions */}
                                <div className="space-y-4">
                                    {currentQuestions.questions.map((question) => (
                                        <div key={question.id} className="mb-4">
                                            <label className="block text-sm font-manrope font-medium text-gray-700 mb-2">
                                                {question.label}
                                                {question.required && <span className="text-red-500 ml-1">*</span>}
                                            </label>

                                            {question.type === 'text' && (
                                                <input
                                                    type="text"
                                                    className="w-full px-3 py-2 border-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-lime-green focus:border-lime-green font-manrope text-gray-800"
                                                    value={responses[question.id] || ''}
                                                    onChange={(e) => handleInputChange(question.id, e.target.value)}
                                                    required={question.required}
                                                />
                                            )}

                                            {question.type === 'select' && (
                                                <select
                                                    className="w-full px-3 py-2 border-2 border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-lime-green focus:border-lime-green font-manrope text-gray-800"
                                                    value={responses[question.id] || ''}
                                                    onChange={(e) => handleInputChange(question.id, e.target.value)}
                                                    required={question.required}
                                                >
                                                    <option value="">Select an option</option>
                                                    {question.options.map(option => (
                                                        <option key={option} value={option}>{option}</option>
                                                    ))}
                                                </select>
                                            )}
                                        </div>
                                    ))}
                                </div>
                            </div>

                            {/* Navigation Buttons */}
                            <div className="flex justify-between">
                                <button
                                    onClick={handlePrevious}
                                    disabled={currentStep === 0}
                                    className="px-4 py-2 bg-gray-200 text-gray-700 font-manrope font-semibold rounded-md hover:bg-gray-300 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                                >
                                    Previous
                                </button>
                                <button
                                    onClick={handleNext}
                                    disabled={!isCurrentStepValid()}
                                    className="px-6 py-2 bg-slate-blue text-white font-manrope font-semibold rounded-md hover:bg-slate-blue/90 disabled:opacity-50 disabled:cursor-not-allowed transition-colors"
                                >
                                    {currentStep === categories.length - 1 ? 'See Your Results' : 'Next'}
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Report Component
        const ReportView = ({ responses, scores }) => {
            const [email, setEmail] = useState('');
            const [emailCaptured, setEmailCaptured] = useState(false);
            const chartRef = useRef(null);
            const radarChartRef = useRef(null);

            useEffect(() => {
                if (chartRef.current) {
                    const ctx = chartRef.current.getContext('2d');
                    new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            datasets: [{
                                data: [scores.overall, 100 - scores.overall],
                                backgroundColor: [
                                    scores.overall >= 85 ? '#607D3B' :
                                    scores.overall >= 70 ? '#F59E0B' :
                                    scores.overall >= 50 ? '#F59E0B' :
                                    '#CC0000',
                                    '#9DBFBF'
                                ],
                                borderWidth: 0
                            }]
                        },
                        options: {
                            circumference: 180,
                            rotation: 270,
                            cutout: '75%',
                            plugins: {
                                legend: { display: false },
                                tooltip: { enabled: false }
                            }
                        }
                    });
                }

                if (radarChartRef.current) {
                    const ctx = radarChartRef.current.getContext('2d');
                    new Chart(ctx, {
                        type: 'radar',
                        data: {
                            labels: [
                                'Transaction Oversight',
                                'Operational Systems',
                                'Knowledge Management',
                                'Client Experience',
                                'Risk Management'
                            ],
                            datasets: [{
                                label: 'Your Score',
                                data: [
                                    scores.transactionOversight,
                                    scores.operationalSystems,
                                    scores.knowledgeManagement,
                                    scores.clientExperience,
                                    scores.riskManagement
                                ],
                                backgroundColor: 'rgba(120, 144, 156, 0.2)',
                                borderColor: 'rgb(120, 144, 156)',
                                pointBackgroundColor: 'rgb(120, 144, 156)',
                                pointBorderColor: '#fff',
                                pointHoverBackgroundColor: '#fff',
                                pointHoverBorderColor: 'rgb(120, 144, 156)'
                            }, {
                                label: 'Top 5% Benchmark',
                                data: [95, 95, 95, 95, 60],
                                backgroundColor: 'rgba(96, 125, 59, 0.2)',
                                borderColor: 'rgb(96, 125, 59)',
                                pointBackgroundColor: 'rgb(96, 125, 59)',
                                pointBorderColor: '#fff',
                                pointHoverBackgroundColor: '#fff',
                                pointHoverBorderColor: 'rgb(96, 125, 59)'
                            }]
                        },
                        options: {
                            scales: {
                                r: {
                                    beginAtZero: true,
                                    max: 100
                                }
                            }
                        }
                    });
                }
            }, [scores]);

            const handleEmailSubmit = async (e) => {
                e.preventDefault();

                try {
                    const assessmentData = {
                        companyInfo: {
                            company_name: responses.company_name,
                            agent_count: responses.agent_count,
                            monthly_deals: responses.monthly_deals,
                            location: responses.location
                        },
                        responses,
                        scores,
                        timestamp: new Date().toISOString()
                    };

                    const submitResponse = await fetch('/api/assessment-submit', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(assessmentData)
                    });

                    if (!submitResponse.ok) {
                        throw new Error('Failed to save assessment');
                    }

                    const submitResult = await submitResponse.json();
                    const assessmentId = submitResult.assessmentId;

                    const emailData = {
                        email,
                        assessmentId,
                        reportData: {
                            companyName: responses.company_name,
                            brokerageSize: responses.agent_count,
                            city: responses.location,
                            overallScore: scores.overall,
                            riskLevel: scores.riskLevel,
                            monthlyTransactions: responses.monthly_deals
                        }
                    };

                    const emailResponse = await fetch('/api/email-capture', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(emailData)
                    });

                    if (!emailResponse.ok) {
                        throw new Error('Failed to capture email');
                    }

                    window.assessmentId = assessmentId;
                    window.reportUrl = `${window.location.origin}/report.html?id=${assessmentId}`;

                    setEmailCaptured(true);

                } catch (error) {
                    console.error('Error submitting assessment:', error);
                    alert('There was an error saving your assessment. Please try again.');
                }
            };

            const gaps = [
                { name: 'Transaction Oversight', score: scores.transactionOversight, max: 100 },
                { name: 'Operational Systems', score: scores.operationalSystems, max: 100 },
                { name: 'Knowledge Management', score: scores.knowledgeManagement, max: 100 },
                { name: 'Client Experience', score: scores.clientExperience, max: 100 },
                { name: 'Risk Management', score: scores.riskManagement, max: 67 }
            ].sort((a, b) => (a.score/a.max) - (b.score/b.max)).slice(0, 3);

            return (
                <div className="min-h-screen bg-gray-50 py-8">
                    <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="bg-white rounded-lg shadow-lg p-8 mb-6">
                            <div className="text-center mb-8">
                                <h1 className="text-4xl font-bebas text-gray-800 mb-2 tracking-wide">
                                    Risk Assessment Report
                                </h1>
                                <p className="text-xl font-manrope font-semibold text-gray-700">
                                    {responses.company_name || 'Your Brokerage'}
                                </p>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                                <div className="text-center">
                                    <h2 className="text-2xl font-manrope font-bold text-gray-800 mb-4">Overall Score</h2>
                                    <div className="relative inline-block">
                                        <canvas ref={chartRef} width="250" height="150"></canvas>
                                        <div className="absolute inset-0 flex items-center justify-center mt-8">
                                            <div>
                                                <div className="text-5xl font-jetbrains font-bold text-gray-800">{scores.overall}</div>
                                                <div className="text-sm font-manrope text-gray-600">out of 100</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div className={`mt-4 inline-block px-4 py-2 rounded-full text-white font-manrope font-semibold ${
                                        scores.riskLevel === 'LOW' ? 'bg-lime-green' :
                                        scores.riskLevel === 'MODERATE' ? 'bg-amber' :
                                        scores.riskLevel === 'HIGH' ? 'bg-amber' : 'bg-signal-red'
                                    }`}>
                                        Risk Level: {scores.riskLevel}
                                    </div>
                                </div>

                                <div>
                                    <h2 className="text-2xl font-manrope font-bold text-gray-800 mb-4">Performance Breakdown</h2>
                                    <canvas ref={radarChartRef} width="300" height="300"></canvas>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-lg shadow-lg p-8 mb-6 border-2 border-red-500">
                            <div className="text-center">
                                <div className="text-5xl mb-4">⚠️</div>
                                <h2 className="text-3xl font-bebas text-red-600 mb-4 tracking-wide">
                                    We Identified {gaps.length} Critical Operational Gaps
                                </h2>
                                <p className="text-xl font-manrope text-gray-700 mb-2">
                                    These inefficiencies are costing your brokerage an estimated{' '}
                                    <span className="font-bold text-red-600 font-jetbrains">
                                        ${scores.overall < 50 ? '127,000' : scores.overall < 70 ? '85,000' : '50,000'}+
                                    </span>{' '}
                                    per year in wasted time, missed deals, and liability exposure.
                                </p>
                                <p className="text-lg font-manrope text-gray-600">
                                    Your complete report reveals exactly what's causing these gaps and how top brokerages have eliminated them.
                                </p>
                            </div>
                        </div>

                        {!emailCaptured ? (
                            <div className="bg-gradient-to-br from-dark-green to-forest-green rounded-lg shadow-2xl p-10 mb-6 text-white">
                                <div className="text-center max-w-4xl mx-auto">
                                    <h2 className="text-4xl md:text-5xl font-bebas mb-4 tracking-wide leading-tight">
                                        Want to See Your Full Report and How Top Brokerages Are Saving $50,000+/Year Using Technology?
                                    </h2>
                                    <p className="text-xl font-manrope mb-8 text-white/90">
                                        Discover the exact systems and capabilities your brokerage can integrate within the next 30-90 days to eliminate inefficiencies and scale profitably.
                                    </p>

                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 text-left">
                                        <div className="bg-white/10 backdrop-blur rounded-lg p-5 border border-white/20">
                                            <div className="text-3xl mb-3">🎯</div>
                                            <h3 className="font-bold text-lg mb-2">Detailed Gap Analysis</h3>
                                            <p className="text-sm text-white/80">See exactly what's broken, why it matters, and the hidden costs</p>
                                        </div>
                                        <div className="bg-white/10 backdrop-blur rounded-lg p-5 border border-white/20">
                                            <div className="text-3xl mb-3">🗺️</div>
                                            <h3 className="font-bold text-lg mb-2">30-90 Day Roadmap</h3>
                                            <p className="text-sm text-white/80">Prioritized action plan with quick wins and transformational changes</p>
                                        </div>
                                        <div className="bg-white/10 backdrop-blur rounded-lg p-5 border border-white/20">
                                            <div className="text-3xl mb-3">💰</div>
                                            <h3 className="font-bold text-lg mb-2">ROI Projections</h3>
                                            <p className="text-sm text-white/80">Quantified savings based on your brokerage's actual operations</p>
                                        </div>
                                    </div>

                                    <form onSubmit={handleEmailSubmit} className="max-w-2xl mx-auto">
                                        <div className="bg-white rounded-lg p-2 shadow-xl flex flex-col sm:flex-row gap-2">
                                            <input
                                                type="email"
                                                value={email}
                                                onChange={(e) => setEmail(e.target.value)}
                                                placeholder="Enter your work email to unlock your full report"
                                                required
                                                className="flex-1 px-6 py-4 border-0 rounded-md focus:outline-none focus:ring-2 focus:ring-lime-green font-manrope text-lg text-gray-800"
                                            />
                                            <button
                                                type="submit"
                                                className="px-8 py-4 bg-red-600 text-white font-manrope font-bold rounded-md hover:bg-red-700 transition-colors text-lg whitespace-nowrap shadow-lg"
                                            >
                                                Get My Full Report →
                                            </button>
                                        </div>
                                    </form>

                                    <div className="mt-6 flex flex-wrap items-center justify-center gap-6 text-sm text-white/80">
                                        <div className="flex items-center gap-2">
                                            <span>✓</span>
                                            <span>Instant access (no wait)</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <span>✓</span>
                                            <span>No credit card required</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <span>✓</span>
                                            <span>Based on 1,000+ assessments</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <span>🔒</span>
                                            <span>Your data is 100% secure</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <div className="bg-lime-green/10 border-2 border-lime-green rounded-lg p-6">
                                <h3 className="text-xl font-manrope font-bold mb-3 text-lime-green">✅ Report Saved!</h3>
                                <p className="font-manrope text-gray-700 mb-4">
                                    Your assessment has been saved. Check your email for the complete report.
                                </p>

                                {window.reportUrl && (
                                    <div className="bg-white border-2 border-gray-300 rounded-md p-4 mb-4">
                                        <p className="text-sm font-manrope font-medium text-gray-700 mb-2">Your Report URL:</p>
                                        <div className="flex items-center gap-2">
                                            <input
                                                type="text"
                                                value={window.reportUrl}
                                                readOnly
                                                className="flex-1 px-3 py-2 text-sm font-jetbrains bg-gray-50 border-2 border-gray-300 rounded"
                                            />
                                            <button
                                                onClick={() => {
                                                    navigator.clipboard.writeText(window.reportUrl);
                                                    alert('Report link copied to clipboard!');
                                                }}
                                                className="px-4 py-2 bg-gray-700 text-white text-sm font-manrope font-semibold rounded hover:bg-gray-800 transition-colors"
                                            >
                                                Copy
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [currentView, setCurrentView] = useState('landing');
            const [responses, setResponses] = useState(null);
            const [scores, setScores] = useState(null);

            const handleStartAssessment = () => {
                setCurrentView('assessment');
            };

            const handleAssessmentComplete = (assessmentResponses, assessmentScores) => {
                setResponses(assessmentResponses);
                setScores(assessmentScores);
                setCurrentView('report');
            };

            return (
                <div>
                    {currentView === 'landing' && (
                        <LandingPage onStartAssessment={handleStartAssessment} />
                    )}
                    {currentView === 'assessment' && (
                        <AssessmentForm onComplete={handleAssessmentComplete} />
                    )}
                    {currentView === 'report' && (
                        <ReportView responses={responses} scores={scores} />
                    )}
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
