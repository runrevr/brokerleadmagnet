<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hidden Risk Revealed - Brokerage Risk Assessment</title>

    <!-- React and Dependencies -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Bebas+Neue&family=Manrope:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500;600&display=swap" rel="stylesheet">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'spruce': '#264E36',
                        'spruce-dark': '#1F3E2B',
                        'dark-green': '#1A3A2C',
                        'forest-green': '#27543D',
                        'river-stone': '#78909C',
                        'sea-glass': '#9DBFBF',
                        'mist': '#F5F7F7',
                        'storm-gray': '#37474F',
                        'slate-blue': '#5B7A8F',
                        'lime-green': '#7BA428',
                        'fern': '#607D3B',
                        'bark-brown': '#6F4E37',
                        'signal-red': '#CC0000',
                        'amber': '#F59E0B'
                    },
                    fontFamily: {
                        'bebas': ['Bebas Neue', 'sans-serif'],
                        'manrope': ['Manrope', 'sans-serif'],
                        'jetbrains': ['JetBrains Mono', 'monospace']
                    }
                }
            }
        }
    </script>

    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Manrope', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            font-weight: 400;
            line-height: 1.6;
            color: #37474F;
            background: #ffffff;
        }

        h1, h2, h3 {
            font-family: 'Bebas Neue', sans-serif;
            font-weight: 400;
            letter-spacing: 0.5px;
        }

        .font-mono, .score-display {
            font-family: 'JetBrains Mono', monospace;
        }

        /* Toast animation */
        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-20px) translateX(-50%);
            }
            to {
                opacity: 1;
                transform: translateY(0) translateX(-50%);
            }
        }

        .animate-fade-in-down {
            animation: fadeInDown 0.3s ease-out;
        }

        /* Float animation for loading icon */
        @keyframes float {
            0%, 100% {
                transform: translateY(0px);
            }
            50% {
                transform: translateY(-10px);
            }
        }

        .animate-float {
            animation: float 3s ease-in-out infinite;
        }

        /* Progress bar marquee animation */
        @keyframes progress {
            0% {
                transform: translateX(-100%);
            }
            100% {
                transform: translateX(400%);
            }
        }

        .animate-progress {
            width: 25%;
            animation: progress 2s linear infinite;
        }

        /* Print-specific styles for PDF generation */
        @media print {
            .no-print {
                display: none !important;
            }
            body {
                background: white !important;
            }
            .shadow-lg, .shadow, .shadow-sm {
                box-shadow: none !important;
            }
            canvas {
                max-width: 100%;
                page-break-inside: avoid;
            }
            .print-break {
                page-break-before: always;
            }
            .print-avoid-break {
                page-break-inside: avoid;
            }
            @page {
                margin: 0.5in;
            }
            * {
                -webkit-print-color-adjust: exact !important;
                print-color-adjust: exact !important;
            }
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Assessment Questions Data Structure
        const assessmentQuestions = {
            companyInfo: {
                title: "Let's Get Started!!",
                questions: [
                    {
                        id: "company_name",
                        label: "What's Your Brokerage Name?",
                        type: "text",
                        required: true
                    }
                ]
            },
            contractReview: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "contract_review_process",
                        label: "Who reviews contracts after they're signed?",
                        type: "cards",
                        required: true,
                        options: [
                            {
                                value: "Agent - Each agent handles their own",
                                icon: "user",
                                label: "Agent",
                                description: "Each agent handles their own"
                            },
                            {
                                value: "Designated Broker - Broker reviews everything",
                                icon: "shield",
                                label: "Designated Broker",
                                description: "Broker reviews everything"
                            },
                            {
                                value: "Transaction Coordinator - TC handles all reviews",
                                icon: "clipboard",
                                label: "Transaction Coordinator",
                                description: "TC handles all reviews"
                            },
                            {
                                value: "Broker & TC - TC reviews, Broker supervises",
                                icon: "users",
                                label: "Broker & TC",
                                description: "TC reviews, Broker supervises"
                            },
                            {
                                value: "No formal process - varies by transaction",
                                icon: "question",
                                label: "No formal process",
                                description: "varies by transaction"
                            }
                        ]
                    }
                ]
            },
            contractReviewTime: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "contract_review_time",
                        label: "When someone reviews a contract, how long does it typically take?",
                        type: "cards",
                        required: true,
                        options: [
                            {
                                value: "Under 30 Minutes - Quick, systemic Review",
                                icon: "clock-fast",
                                label: "Under 30 Minutes",
                                description: "Quick, systemic Review"
                            },
                            {
                                value: "30 - 1 Hour - Thorough manual review",
                                icon: "clock",
                                label: "30 - 1 Hour",
                                description: "Thorough manual review"
                            },
                            {
                                value: "1-2 Hours - Detailed Line by Line (Standard)",
                                icon: "clock-medium",
                                label: "1-2 Hours",
                                description: "Detailed Line by Line (Standard)"
                            },
                            {
                                value: "2-3 Hours - Very Time Intensive",
                                icon: "clock-slow",
                                label: "2-3 Hours",
                                description: "Very Time Intensive"
                            },
                            {
                                value: "3+ Hours - Extremely Complex & Time Consuming",
                                icon: "clock-alert",
                                label: "3+ Hours",
                                description: "Extremely Complex & Time Consuming"
                            },
                            {
                                value: "Varies - No Specific Systems in Place",
                                icon: "question",
                                label: "Varies",
                                description: "No Specific Systems in Place"
                            }
                        ]
                    }
                ]
            },
            documentReview: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "document_review_process",
                        label: "Who actually reads HOA docs, title reports, and inspection reports?",
                        type: "cards",
                        required: true,
                        options: [
                            {
                                value: "Agents read everything - Required and consistently done",
                                icon: "document-check",
                                label: "Agents read everything",
                                description: "Required and consistently done"
                            },
                            {
                                value: "Agents are supposed to… But most skim or skip sections",
                                icon: "document-search",
                                label: "Agents are supposed to…",
                                description: "But most skim or skip sections"
                            },
                            {
                                value: "TC/Broker reviews for them - Agents get summaries/highlights",
                                icon: "document-text",
                                label: "TC/Broker reviews for them",
                                description: "Agents get summaries/highlights"
                            },
                            {
                                value: "Agents handle their own way - No formal policy or oversight",
                                icon: "document-duplicate",
                                label: "Agents handle their own way",
                                description: "No formal policy or oversight"
                            },
                            {
                                value: "Honestly? Nobody reads them all, too time consuming. Cross fingers and pray.",
                                icon: "exclamation",
                                label: "Honestly? Nobody reads them all",
                                description: "Too time consuming. Cross fingers and pray."
                            }
                        ]
                    }
                ]
            },
            deadlineTracking: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "deadline_tracking_method",
                        label: "How are critical deadlines tracked across transactions?",
                        subtext: "Inspection periods, financing contingencies, closing dates, etc.",
                        type: "checkbox",
                        required: true,
                        options: [
                            "Manual - paper/memory based. Agents track on paper or rely on memory",
                            "Each agent uses their own - Personal calendar/reminders. No centralized tracking",
                            "Shared calendar/spreadsheet - Agents update their own dates in shared system",
                            "Centralized TC/Admin system - TC manually enters all dates into shared calendar/system",
                            "Automated deadline tracking - System extracts and monitors dates automatically",
                            "No formal tracking system - Varies by agent"
                        ]
                    }
                ]
            },
            impactAssessment: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "deadline_impact",
                        label: "In the past year, have missed transaction deadlines or contract issues cost you deals or money?",
                        subtext: "Missed deadlines, contract errors, late-discovered problems, etc.",
                        type: "checkbox",
                        required: true,
                        options: [
                            "No - clean track record. Zero lost deals or concessions",
                            "Close calls, but no losses. Caught issues just in time",
                            "1-2 deals impacted - Minor financial impact",
                            "3-5 deals lost or concessions - Significant financial impact",
                            "5+ deals affected - Major ongoing problem",
                            "We don't track this data - No formal tracking system"
                        ]
                    }
                ]
            },
            agentTraining: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "training_frequency",
                        label: "How often do you conduct mandatory agent training on forms/contracts?",
                        type: "checkbox",
                        required: true,
                        options: [
                            "Monthly - ongoing education, regular reinforcement",
                            "Quarterly - seasonal updates. Around four times per year",
                            "Twice per year - Semi-annual training",
                            "Annually - once per year. Meets minimum requirement",
                            "Only during initial onboarding - No ongoing training",
                            "Honestly, we're behind. Struggle to keep up with it"
                        ]
                    }
                ]
            },
            agentSupport: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "agent_question_handling",
                        label: "When agents have questions about contracts or transactions, they:",
                        type: "cards",
                        required: true,
                        options: [
                            {
                                value: "Check our knowledge system - Instant self-service answers",
                                icon: "database",
                                label: "Check our knowledge system",
                                description: "Instant self-service answers"
                            },
                            {
                                value: "Search internal docs/wiki - Company resources available",
                                icon: "book",
                                label: "Search internal docs/wiki",
                                description: "Company resources available"
                            },
                            {
                                value: "Email or Slack the Broker/TC - Wait for response",
                                icon: "mail",
                                label: "Email or Slack the Broker/TC",
                                description: "Wait for response"
                            },
                            {
                                value: "Call/text broker or TC - Interrupt for immediate answer",
                                icon: "phone",
                                label: "Call/text broker or TC",
                                description: "Interrupt for immediate answer"
                            },
                            {
                                value: "Ask other agents - Hope someone knows",
                                icon: "chat",
                                label: "Ask other agents",
                                description: "Hope someone knows"
                            },
                            {
                                value: "Google it or wing it - Figure it out themselves",
                                icon: "lightbulb",
                                label: "Google it or wing it",
                                description: "Figure it out themselves"
                            }
                        ]
                    }
                ]
            },
            legalQuestions: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "legal_question_handling",
                        label: "How do agents get answers about contract law and state regulations?",
                        type: "cards",
                        required: true,
                        options: [
                            {
                                value: "Contact our real estate attorney- Proper legal counsel for guidance",
                                icon: "scale",
                                label: "Contact our real estate attorney",
                                description: "Proper legal counsel for guidance"
                            },
                            {
                                value: "Ask designated broker - Broker provides legal guidance",
                                icon: "shield",
                                label: "Ask designated broker",
                                description: "Broker provides legal guidance"
                            },
                            {
                                value: "Reference our legal resources - Company/MLS-approved materials",
                                icon: "book",
                                label: "Reference our legal resources",
                                description: "Company/MLS-approved materials"
                            },
                            {
                                value: "Call title company or escrow - Rely on transaction partners",
                                icon: "phone",
                                label: "Call title company or escrow",
                                description: "Rely on transaction partners"
                            },
                            {
                                value: "Google or online research - Search for answers themselves",
                                icon: "search",
                                label: "Google or online research",
                                description: "Search for answers themselves"
                            },
                            {
                                value: "Make their best judgment - Decide based on experience",
                                icon: "lightbulb",
                                label: "Make their best judgment",
                                description: "Decide based on experience"
                            }
                        ]
                    }
                ]
            },
            clientCommunication: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "client_timeline_communication",
                        label: "How do clients receive information about transaction timelines and responsibilities?",
                        type: "cards",
                        required: true,
                        options: [
                            {
                                value: "Automated client portal - Real-time timeline with updates",
                                icon: "computer",
                                label: "Automated client portal",
                                description: "Real-time timeline with updates"
                            },
                            {
                                value: "Custom timeline document - Personalized for their transaction",
                                icon: "document-text",
                                label: "Custom timeline document",
                                description: "Personalized for their transaction"
                            },
                            {
                                value: "Generic checklist/guide - Standard document for all clients",
                                icon: "clipboard",
                                label: "Generic checklist/guide",
                                description: "Standard document for all clients"
                            },
                            {
                                value: "Agent sends periodic updates - Email/text as things progress",
                                icon: "mail",
                                label: "Agent sends periodic updates",
                                description: "Email/text as things progress"
                            },
                            {
                                value: "Verbal communication only - Agent explains during calls",
                                icon: "phone",
                                label: "Verbal communication only",
                                description: "Agent explains during calls"
                            },
                            {
                                value: "Clients figure it out - They ask when confused",
                                icon: "question",
                                label: "Clients figure it out",
                                description: "They ask when confused"
                            }
                        ]
                    }
                ]
            },
            clientEngagement: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "client_document_reading",
                        label: "What percentage of your clients actually read and understand all transaction documents?",
                        type: "cards",
                        required: true,
                        options: [
                            {
                                value: "Honestly, very few read it all - They rely on us to explain",
                                icon: "exclamation",
                                label: "Honestly, very few read it all",
                                description: "They rely on us to explain"
                            },
                            {
                                value: "Under 20% read thoroughly - Most clients just trust us",
                                icon: "chart-low",
                                label: "Under 20% read thoroughly",
                                description: "Most clients just trust us"
                            },
                            {
                                value: "20-50% skim at best - Many just sign",
                                icon: "chart-mid-low",
                                label: "20-50% skim at best",
                                description: "Many just sign"
                            },
                            {
                                value: "50-80% read most documents - Decent engagement",
                                icon: "chart-mid-high",
                                label: "50-80% read most documents",
                                description: "Decent engagement"
                            },
                            {
                                value: "80%+ read everything - Highly engaged clients",
                                icon: "chart-high",
                                label: "80%+ read everything",
                                description: "Highly engaged clients"
                            },
                            {
                                value: "We don't really know - Never tracked this",
                                icon: "question",
                                label: "We don't really know",
                                description: "Never tracked this"
                            }
                        ]
                    }
                ]
            },
            clientQuestions: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "client_question_handling",
                        label: "How can clients get questions answered about their transaction documents?",
                        type: "cards",
                        required: true,
                        options: [
                            {
                                value: "24/7 AI chatbot - Instant answers anytime, all interactions logged",
                                icon: "robot",
                                label: "24/7 AI chatbot",
                                description: "Instant answers anytime, all interactions logged"
                            },
                            {
                                value: "Email agent, wait for reply - Usually within 24 hours",
                                icon: "mail",
                                label: "Email agent, wait for reply",
                                description: "Usually within 24 hours"
                            },
                            {
                                value: "Call/text agent during business hours - Agent availability limited",
                                icon: "phone",
                                label: "Call/text agent during business hours",
                                description: "Agent availability limited"
                            },
                            {
                                value: "Ask at scheduled check-ins - Weekly or milestone meetings",
                                icon: "calendar",
                                label: "Ask at scheduled check-ins",
                                description: "Weekly or milestone meetings"
                            },
                            {
                                value: "Refer to documents/FAQs - Clients search on their own",
                                icon: "book",
                                label: "Refer to documents/FAQs",
                                description: "Clients search on their own"
                            },
                            {
                                value: "Hope they ask if confused - No formal system for questions",
                                icon: "question",
                                label: "Hope they ask if confused",
                                description: "No formal system for questions"
                            }
                        ]
                    }
                ]
            },
            liabilityAssessment: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "client_understanding_liability",
                        label: "What's your liability if a client claims they didn't understand a document?",
                        type: "cards",
                        required: true,
                        options: [
                            {
                                value: "High exposure - We're liable if they claim inadequate disclosure",
                                icon: "alert-high",
                                label: "High exposure",
                                description: "We're liable if they claim inadequate disclosure"
                            },
                            {
                                value: "Significant exposure - Hard to prove adequate explanation/education",
                                icon: "alert-medium",
                                label: "Significant exposure",
                                description: "Hard to prove adequate explanation/education"
                            },
                            {
                                value: "Situational - Depends if we can prove we made ourselves available",
                                icon: "scale",
                                label: "Situational",
                                description: "Depends if we can prove we made ourselves available"
                            },
                            {
                                value: "Partially protected - We document delivery and verbal explanations",
                                icon: "shield-check",
                                label: "Partially protected",
                                description: "We document delivery and verbal explanations"
                            },
                            {
                                value: "Well-protected - We document education access with logged Q&A interactions",
                                icon: "shield-lock",
                                label: "Well-protected",
                                description: "We document education access with logged Q&A interactions"
                            },
                            {
                                value: "Honestly uncertain - Never really assessed our liability in this area",
                                icon: "question",
                                label: "Honestly uncertain",
                                description: "Never really assessed our liability in this area"
                            }
                        ]
                    }
                ]
            },
            claimsHistory: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "eo_claims_history",
                        label: "In the past 3 years, have you had E&O claims or close calls related to transaction issues?",
                        type: "cards",
                        required: true,
                        options: [
                            {
                                value: "No claims, no close calls - Clean record",
                                icon: "check-circle",
                                label: "No claims, no close calls",
                                description: "Clean record"
                            },
                            {
                                value: "Close calls, but avoided claims - Caught issues just in time",
                                icon: "alert-warning",
                                label: "Close calls, but avoided claims",
                                description: "Caught issues just in time"
                            },
                            {
                                value: "One claim or serious incident - Learned expensive lessons",
                                icon: "alert-medium",
                                label: "One claim or serious incident",
                                description: "Learned expensive lessons"
                            },
                            {
                                value: "Multiple claims or incidents - Ongoing concern",
                                icon: "alert-high",
                                label: "Multiple claims or incidents",
                                description: "Ongoing concern"
                            },
                            {
                                value: "Not sure of our claim history - Would need to check records",
                                icon: "question",
                                label: "Not sure of our claim history",
                                description: "Would need to check records"
                            },
                            {
                                value: "Prefer not to disclose",
                                icon: "eye-off",
                                label: "Prefer not to disclose",
                                description: ""
                            }
                        ]
                    }
                ]
            },
            agentCount: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "agent_count",
                        label: "Number of Agents",
                        type: "select",
                        options: ["25 or less", "26-50", "51-100", "100+"],
                        required: true
                    }
                ]
            },
            monthlyTransactions: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "monthly_deals",
                        label: "Number of Transactions Per Month",
                        type: "select",
                        options: ["25 or less", "26-50", "51-100", "100+"],
                        required: true
                    }
                ]
            },
            primaryMarket: {
                title: "Transactional Risk Assessment",
                questions: [
                    {
                        id: "location",
                        label: "Primary Market/City",
                        type: "text",
                        required: true
                    }
                ]
            }
        };

        // Scoring calculation function
        const calculateScores = (responses) => {
            let scores = {
                transactionOversight: 0,
                operationalSystems: 0,
                knowledgeManagement: 0,
                clientExperience: 0,
                riskManagement: 0,
                growthReadiness: 0,
                overall: 0
            };

            // Calculate category scores
            Object.entries(assessmentQuestions).forEach(([category, data]) => {
                if (category !== 'companyInfo') {
                    let categoryScore = 0;
                    data.questions.forEach(question => {
                        if (question.scoring && responses[question.id]) {
                            categoryScore += question.scoring[responses[question.id]] || 0;
                        }
                    });
                    scores[category] = categoryScore;
                }
            });

            // Calculate overall score (out of 100)
            const coreTotal = scores.transactionOversight + scores.operationalSystems +
                             scores.knowledgeManagement + scores.clientExperience +
                             scores.riskManagement;

            scores.overall = Math.round((coreTotal / 467) * 100);

            // Determine risk level
            if (scores.overall >= 85) scores.riskLevel = "LOW";
            else if (scores.overall >= 70) scores.riskLevel = "MODERATE";
            else if (scores.overall >= 50) scores.riskLevel = "HIGH";
            else scores.riskLevel = "CRITICAL";

            // Determine percentile
            if (scores.overall >= 85) scores.percentile = "Top 5%";
            else if (scores.overall >= 70) scores.percentile = "Top 25%";
            else if (scores.overall >= 50) scores.percentile = "Top 50%";
            else scores.percentile = "Bottom 50%";

            return scores;
        };

        // New Landing Page Component (based on Figma design)
        const LandingPage = ({ onStartAssessment }) => {
            return (
                <div className="bg-white">
                    {/* Hero Section - Full Width Background */}
                    <section className="relative bg-cover bg-center bg-no-repeat min-h-[600px] flex items-center justify-center" style={{backgroundImage: "url('/lead-magnet-header.png')"}}>
                        {/* Dark Gradient Overlay - Left to Right */}
                        <div className="absolute inset-0 bg-gradient-to-r from-black via-black/70 to-black/20"></div>

                        {/* Hero Content */}
                        <div className="relative z-10 max-w-4xl mx-auto text-center px-4 py-16">
                            {/* Small label at top */}
                            <div className="text-sm text-white/90 uppercase tracking-wider mb-6 font-manrope font-medium">
                                Hidden Risk Revealed
                            </div>

                            {/* Main Headline */}
                            <h1 className="text-4xl md:text-5xl lg:text-6xl font-bebas text-white mb-6 leading-tight">
                                THE 6-FIGURE MISTAKES MOST BROKERAGES MAKE{' '}
                                <span className="text-amber">(AND HOW THE TOP 10% AVOID THEM)</span>
                            </h1>

                            {/* Subheading */}
                            <p className="text-lg md:text-xl text-white/90 mb-10 max-w-2xl mx-auto font-manrope leading-relaxed">
                                Most brokerages don't realize how much hidden risk sits inside their transactions. Take this free 60-second assessment to uncover blind spots in compliance, agent oversight, and deal flow—and see how your firm compares to top-performers nationwide.
                            </p>

                            {/* CTA Button */}
                            <button
                                onClick={onStartAssessment}
                                className="inline-flex items-center gap-2 text-white px-10 py-5 rounded-md font-manrope font-bold text-lg transition-all duration-200 transform hover:-translate-y-1 hover:scale-105"
                                style={{
                                    backgroundColor: '#607D3B',
                                    boxShadow: '0 4px 6px rgba(0, 0, 0, 0.3), 0 10px 25px rgba(96, 125, 59, 0.4)'
                                }}
                                onMouseEnter={(e) => {
                                    e.currentTarget.style.backgroundColor = '#4F6630';
                                    e.currentTarget.style.boxShadow = '0 6px 10px rgba(0, 0, 0, 0.4), 0 15px 35px rgba(79, 102, 48, 0.5)';
                                }}
                                onMouseLeave={(e) => {
                                    e.currentTarget.style.backgroundColor = '#607D3B';
                                    e.currentTarget.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.3), 0 10px 25px rgba(96, 125, 59, 0.4)';
                                }}
                            >
                                <svg className="w-6 h-6" fill="currentColor" viewBox="0 0 20 20">
                                    <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                    <path fillRule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm3 4a1 1 0 000 2h.01a1 1 0 100-2H7zm3 0a1 1 0 000 2h3a1 1 0 100-2h-3zm-3 4a1 1 0 100 2h.01a1 1 0 100-2H7zm3 0a1 1 0 100 2h3a1 1 0 100-2h-3z" clipRule="evenodd"/>
                                </svg>
                                Get My Risk Score & 60-Day Plan
                            </button>

                            {/* Credibility Line */}
                            <p className="text-sm text-white/70 mt-6 font-manrope italic">
                                Built by real estate professionals with deep understanding of transaction workflows used in platforms like SkySlope and LoneWolf.
                            </p>
                        </div>
                    </section>

                    {/* Find Your Hidden Vulnerabilities Section */}
                    <section className="py-16 px-4 bg-white">
                        <div className="max-w-6xl mx-auto">
                            <div className="text-center mb-16">
                                <h2 className="text-3xl md:text-4xl font-bebas text-gray-800 mb-6 uppercase tracking-wide">
                                    Uncover the Risk Areas That Cost Brokerages the Most
                                </h2>
                                <p className="text-gray-600 font-manrope max-w-xl mx-auto mb-8">
                                    Our assessment pinpoints where gaps in compliance, agent oversight, operations, and client experience are exposing your brokerage to preventable losses.
                                </p>
                            </div>

                            {/* 4 Cards Grid */}
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
                                {/* Card 1 */}
                                <div className="bg-white p-6 rounded-lg border border-gray-200 transition-all duration-300 hover:-translate-y-0.5 hover:border-spruce/50" style={{boxShadow: '0 4px 14px rgba(0,0,0,0.045)'}} onMouseEnter={(e) => e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.12)'} onMouseLeave={(e) => e.currentTarget.style.boxShadow = '0 4px 14px rgba(0,0,0,0.045)'}>
                                    <div className="w-12 h-12 bg-spruce/10 rounded-lg flex items-center justify-center mb-4 transition-colors duration-300 hover:bg-spruce/20">
                                        <svg className="w-6 h-6 text-spruce" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"/>
                                            <path fillRule="evenodd" d="M4 5a2 2 0 012-2 3 3 0 003 3h2a3 3 0 003-3 2 2 0 012 2v11a2 2 0 01-2 2H6a2 2 0 01-2-2V5zm9.707 5.707a1 1 0 00-1.414-1.414L9 12.586l-1.293-1.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clipRule="evenodd"/>
                                        </svg>
                                    </div>
                                    <h3 className="text-lg font-bold text-gray-800 mb-2 font-manrope">Brokerage Oversight</h3>
                                    <p className="text-sm text-gray-600 font-manrope leading-relaxed">
                                        Are incomplete contracts, outdated forms, or missing signatures putting your brokerage at risk of compliance violations and E&O exposure?
                                    </p>
                                </div>

                                {/* Card 2 */}
                                <div className="bg-white p-6 rounded-lg border border-gray-200 transition-all duration-300 hover:-translate-y-0.5 hover:border-spruce/50" style={{boxShadow: '0 4px 14px rgba(0,0,0,0.045)'}} onMouseEnter={(e) => e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.12)'} onMouseLeave={(e) => e.currentTarget.style.boxShadow = '0 4px 14px rgba(0,0,0,0.045)'}>
                                    <div className="w-12 h-12 bg-spruce/10 rounded-lg flex items-center justify-center mb-4 transition-colors duration-300 hover:bg-spruce/20">
                                        <svg className="w-6 h-6 text-spruce" fill="currentColor" viewBox="0 0 20 20">
                                            <path fillRule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clipRule="evenodd"/>
                                        </svg>
                                    </div>
                                    <h3 className="text-lg font-bold text-gray-800 mb-2 font-manrope">Operational Efficiency</h3>
                                    <p className="text-sm text-gray-600 font-manrope leading-relaxed">
                                        Is poor tracking of offers, timelines, and documentation causing delays, lost deals, or client dissatisfaction?
                                    </p>
                                </div>

                                {/* Card 3 */}
                                <div className="bg-white p-6 rounded-lg border border-gray-200 transition-all duration-300 hover:-translate-y-0.5 hover:border-spruce/50" style={{boxShadow: '0 4px 14px rgba(0,0,0,0.045)'}} onMouseEnter={(e) => e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.12)'} onMouseLeave={(e) => e.currentTarget.style.boxShadow = '0 4px 14px rgba(0,0,0,0.045)'}>
                                    <div className="w-12 h-12 bg-spruce/10 rounded-lg flex items-center justify-center mb-4 transition-colors duration-300 hover:bg-spruce/20">
                                        <svg className="w-6 h-6 text-spruce" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/>
                                        </svg>
                                    </div>
                                    <h3 className="text-lg font-bold text-gray-800 mb-2 font-manrope">Agent Training & Knowledge Base</h3>
                                    <p className="text-sm text-gray-600 font-manrope leading-relaxed">
                                        Are agents missing critical contract deadlines or mismanaging forms, increasing the risk of failed inspections, financing fallout, or deal collapse?
                                    </p>
                                </div>

                                {/* Card 4 */}
                                <div className="bg-white p-6 rounded-lg border border-gray-200 transition-all duration-300 hover:-translate-y-0.5 hover:border-spruce/50" style={{boxShadow: '0 4px 14px rgba(0,0,0,0.045)'}} onMouseEnter={(e) => e.currentTarget.style.boxShadow = '0 8px 24px rgba(0,0,0,0.12)'} onMouseLeave={(e) => e.currentTarget.style.boxShadow = '0 4px 14px rgba(0,0,0,0.045)'}>
                                    <div className="w-12 h-12 bg-spruce/10 rounded-lg flex items-center justify-center mb-4 transition-colors duration-300 hover:bg-spruce/20">
                                        <svg className="w-6 h-6 text-spruce" fill="currentColor" viewBox="0 0 20 20">
                                            <path fillRule="evenodd" d="M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z" clipRule="evenodd"/>
                                        </svg>
                                    </div>
                                    <h3 className="text-lg font-bold text-gray-800 mb-2 font-manrope">Client Experience</h3>
                                    <p className="text-sm text-gray-600 font-manrope leading-relaxed">
                                        Is sensitive client data — or transaction information — at risk of being mishandled, lost, or exposed to potential fraud or cyber threats?
                                    </p>
                                </div>
                            </div>
                        </div>
                    </section>

                    {/* Your Path to Secure Transactions */}
                    <section className="py-16 px-4" style={{backgroundColor: '#9DBFBF'}}>
                        <div className="max-w-6xl mx-auto">
                            <div className="text-center mb-8">
                                {/* Subtle dividing line above */}
                                <div className="w-24 h-px bg-gray-800/10 mx-auto mb-6"></div>

                                <h2 className="text-3xl md:text-4xl font-bebas text-gray-800 mb-3 uppercase tracking-wide">
                                    SEE EXACTLY WHERE YOUR RISKS ARE—AND HOW TO FIX THEM
                                </h2>
                                <p className="text-gray-600 font-manrope max-w-2xl mx-auto">
                                    In just a few minutes, you'll uncover hidden vulnerabilities inside your transactions and walk away with a personalized 60-day improvement plan.
                                </p>
                            </div>

                            {/* 3 Step Process */}
                            <div className="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
                                {/* Step 1 */}
                                <div className="text-center">
                                    <div
                                        className="w-16 h-16 text-white rounded-full flex items-center justify-center text-2xl font-bold font-manrope mx-auto mb-4 transition-all duration-300 cursor-pointer hover:-translate-y-1 hover:scale-105"
                                        style={{backgroundColor: '#607D3B', boxShadow: '0 4px 14px rgba(96, 125, 59, 0.3)'}}
                                        onMouseEnter={(e) => {
                                            e.currentTarget.style.boxShadow = '0 8px 24px rgba(96, 125, 59, 0.5), 0 0 20px rgba(96, 125, 59, 0.4)';
                                        }}
                                        onMouseLeave={(e) => {
                                            e.currentTarget.style.boxShadow = '0 4px 14px rgba(96, 125, 59, 0.3)';
                                        }}
                                    >
                                        1
                                    </div>
                                    <h3 className="text-xl font-bold text-gray-800 mb-3 font-manrope">Take the Quiz</h3>
                                    <p className="text-gray-600 font-manrope text-sm leading-relaxed">
                                        Answer a quick set of questions about your brokerage's transaction workflow. It's fast, easy, and completely confidential.
                                    </p>
                                </div>

                                {/* Step 2 */}
                                <div className="text-center">
                                    <div
                                        className="w-16 h-16 text-white rounded-full flex items-center justify-center text-2xl font-bold font-manrope mx-auto mb-4 transition-all duration-300 cursor-pointer hover:-translate-y-1 hover:scale-105"
                                        style={{backgroundColor: '#607D3B', boxShadow: '0 4px 14px rgba(96, 125, 59, 0.3)'}}
                                        onMouseEnter={(e) => {
                                            e.currentTarget.style.boxShadow = '0 8px 24px rgba(96, 125, 59, 0.5), 0 0 20px rgba(96, 125, 59, 0.4)';
                                        }}
                                        onMouseLeave={(e) => {
                                            e.currentTarget.style.boxShadow = '0 4px 14px rgba(96, 125, 59, 0.3)';
                                        }}
                                    >
                                        2
                                    </div>
                                    <h3 className="text-xl font-bold text-gray-800 mb-3 font-manrope">Get Your Risk Score</h3>
                                    <p className="text-gray-600 font-manrope text-sm leading-relaxed">
                                        Instantly receive a personalized Transaction Risk Score, plus a breakdown of your highest-risk areas.
                                    </p>
                                </div>

                                {/* Step 3 */}
                                <div className="text-center">
                                    <div
                                        className="w-16 h-16 text-white rounded-full flex items-center justify-center text-2xl font-bold font-manrope mx-auto mb-4 transition-all duration-300 cursor-pointer hover:-translate-y-1 hover:scale-105"
                                        style={{backgroundColor: '#607D3B', boxShadow: '0 4px 14px rgba(96, 125, 59, 0.3)'}}
                                        onMouseEnter={(e) => {
                                            e.currentTarget.style.boxShadow = '0 8px 24px rgba(96, 125, 59, 0.5), 0 0 20px rgba(96, 125, 59, 0.4)';
                                        }}
                                        onMouseLeave={(e) => {
                                            e.currentTarget.style.boxShadow = '0 4px 14px rgba(96, 125, 59, 0.3)';
                                        }}
                                    >
                                        3
                                    </div>
                                    <h3 className="text-xl font-bold text-gray-800 mb-3 font-manrope">Fix Your Exposure</h3>
                                    <p className="text-gray-600 font-manrope text-sm leading-relaxed">
                                        Get tailored recommendations and a 60-day plan to reduce risk, improve oversight, and streamline your operations.
                                    </p>
                                </div>
                            </div>
                        </div>
                    </section>

                    {/* Bottom CTA Section */}
                    <section className="py-16 px-4" style={{backgroundColor: '#F7F9FA'}}>
                        <div className="max-w-4xl mx-auto text-center rounded-xl p-8 md:p-12" style={{border: '1px solid #E2E8F0'}}>
                            <h2 className="text-4xl md:text-5xl font-bebas mb-4 uppercase tracking-wide" style={{color: '#1e3a5f'}}>
                                Stop Guessing, Start Assessing.
                            </h2>
                            <p className="text-lg mb-8 font-manrope max-w-2xl mx-auto" style={{color: '#475569'}}>
                                Turn transaction anxiety into a competitive advantage. Discover how to protect your reputation, save money, and close more deals with confidence.
                            </p>
                            <button
                                onClick={onStartAssessment}
                                className="inline-flex items-center gap-2 text-white px-10 py-5 rounded-md font-manrope font-bold text-lg transition-all duration-200 transform hover:-translate-y-1 hover:scale-105"
                                style={{
                                    backgroundColor: '#607D3B',
                                    boxShadow: '0 4px 6px rgba(0, 0, 0, 0.3), 0 10px 25px rgba(96, 125, 59, 0.4)'
                                }}
                                onMouseEnter={(e) => {
                                    e.currentTarget.style.backgroundColor = '#4F6630';
                                    e.currentTarget.style.boxShadow = '0 6px 10px rgba(0, 0, 0, 0.4), 0 15px 35px rgba(79, 102, 48, 0.5)';
                                }}
                                onMouseLeave={(e) => {
                                    e.currentTarget.style.backgroundColor = '#607D3B';
                                    e.currentTarget.style.boxShadow = '0 4px 6px rgba(0, 0, 0, 0.3), 0 10px 25px rgba(96, 125, 59, 0.4)';
                                }}
                            >
                                Find My Risk Profile Now
                            </button>
                        </div>
                    </section>
                </div>
            );
        };

        // Before You Begin Component (Pre-Quiz Page)
        const BeforeYouBegin = ({ onStartQuiz }) => {
            return (
                <div className="min-h-screen bg-mist py-12 px-4">
                    <div className="max-w-3xl mx-auto">
                        {/* Small Eyebrow Label */}
                        <div className="text-center mb-6">
                            <p className="text-sm text-storm-gray font-manrope font-medium uppercase tracking-wider">
                                Built for Brokerages
                            </p>
                        </div>

                        {/* Main Card */}
                        <div className="bg-white rounded-2xl shadow-lg p-8 md:p-12 border-2" style={{borderColor: '#9DBFBF20'}}>
                            {/* Heading */}
                            <h1 className="text-4xl md:text-5xl font-bold text-gray-800 text-center mb-4 font-manrope">
                                Before You Begin
                            </h1>

                            {/* Subheadline */}
                            <p className="text-xl text-gray-600 text-center mb-12 font-manrope">
                                This assessment takes about <strong>2 minutes</strong> (17 quick questions).
                            </p>

                            {/* Value Bullet Points */}
                            <div className="space-y-6 mb-12">
                                <div className="flex items-start gap-4">
                                    <div className="flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center" style={{backgroundColor: 'rgba(38, 78, 54, 0.1)'}}>
                                        <svg className="w-6 h-6" style={{color: '#37474F'}} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 className="text-lg font-bold text-gray-800 mb-1 font-manrope">Instant Transaction Risk Score (0–100)</h3>
                                        <p className="text-gray-600 font-manrope">See exactly where your brokerage stands against industry benchmarks.</p>
                                    </div>
                                </div>

                                <div className="flex items-start gap-4">
                                    <div className="flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center" style={{backgroundColor: 'rgba(38, 78, 54, 0.1)'}}>
                                        <svg className="w-6 h-6" style={{color: '#37474F'}} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 className="text-lg font-bold text-gray-800 mb-1 font-manrope">4-Pillar Risk Breakdown</h3>
                                        <p className="text-gray-600 font-manrope">Identify weaknesses in oversight, operations, knowledge, and client experience.</p>
                                    </div>
                                </div>

                                <div className="flex items-start gap-4">
                                    <div className="flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center" style={{backgroundColor: 'rgba(38, 78, 54, 0.1)'}}>
                                        <svg className="w-6 h-6" style={{color: '#37474F'}} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 className="text-lg font-bold text-gray-800 mb-1 font-manrope">Personalized 60-Day Improvement Roadmap</h3>
                                        <p className="text-gray-600 font-manrope">Get actionable steps tailored to your specific bottlenecks.</p>
                                    </div>
                                </div>

                                <div className="flex items-start gap-4">
                                    <div className="flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center" style={{backgroundColor: 'rgba(38, 78, 54, 0.1)'}}>
                                        <svg className="w-6 h-6" style={{color: '#37474F'}} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                            <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                                        </svg>
                                    </div>
                                    <div>
                                        <h3 className="text-lg font-bold text-gray-800 mb-1 font-manrope">Top 10% Brokerage Benchmark</h3>
                                        <p className="text-gray-600 font-manrope">See how you compare to top-performing brokerages nationwide.</p>
                                    </div>
                                </div>
                            </div>

                            {/* Primary Start Button */}
                            <div className="text-center mb-6">
                                <button
                                    onClick={onStartQuiz}
                                    className="inline-flex items-center gap-2 bg-spruce text-white px-10 py-5 rounded-lg font-manrope font-bold text-lg transition-all hover:bg-spruce-dark shadow-lg"
                                >
                                    Start My Assessment
                                    <svg className="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 8l4 4m0 0l-4 4m4-4H3" />
                                    </svg>
                                </button>
                            </div>

                            {/* Note Under Button */}
                            <p className="text-sm text-gray-500 text-center font-manrope italic">
                                No sales pitch. Instant report on completion.
                            </p>

                            {/* Social Proof Line */}
                            <div className="mt-8 pt-8 border-t border-gray-200">
                                <p className="text-sm text-gray-600 text-center font-manrope italic">
                                    Created by a brokerage owner; aligned with workflows used in SkySlope & Lone Wolf.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Assessment Form Component
        const AssessmentForm = ({ onComplete }) => {
            const [currentStep, setCurrentStep] = useState(0);
            const [responses, setResponses] = useState({});
            const [showMotivationToast, setShowMotivationToast] = useState(false);

            const categories = Object.keys(assessmentQuestions);
            const currentCategory = categories[currentStep];
            const currentQuestions = assessmentQuestions[currentCategory];
            const progress = ((currentStep + 1) / categories.length) * 100;

            // Load saved progress on mount
            useEffect(() => {
                try {
                    const savedProgress = localStorage.getItem('quizProgress');
                    if (savedProgress) {
                        const { step, responses: savedResponses, timestamp } = JSON.parse(savedProgress);
                        // Only restore if saved within last 24 hours
                        const savedTime = new Date(timestamp);
                        const now = new Date();
                        const hoursDiff = (now - savedTime) / (1000 * 60 * 60);

                        if (hoursDiff < 24) {
                            const shouldResume = window.confirm('Would you like to resume where you left off?');
                            if (shouldResume) {
                                setCurrentStep(step);
                                setResponses(savedResponses);
                            } else {
                                localStorage.removeItem('quizProgress');
                            }
                        } else {
                            localStorage.removeItem('quizProgress');
                        }
                    }
                } catch (error) {
                    console.error('Error loading saved progress:', error);
                }
            }, []);

            // Save progress to localStorage whenever it changes
            useEffect(() => {
                if (currentStep > 0 || Object.keys(responses).length > 0) {
                    try {
                        const progressData = {
                            step: currentStep,
                            responses,
                            timestamp: new Date().toISOString()
                        };
                        localStorage.setItem('quizProgress', JSON.stringify(progressData));
                    } catch (error) {
                        console.error('Error saving progress:', error);
                    }
                }
            }, [currentStep, responses]);

            // Show motivation toast at halfway point (question 9, which is index 8)
            useEffect(() => {
                if (currentStep === 8 && !showMotivationToast) {
                    setShowMotivationToast(true);
                    setTimeout(() => {
                        setShowMotivationToast(false);
                    }, 3000); // Auto-dismiss after 3 seconds
                }
            }, [currentStep]);

            const handleInputChange = (questionId, value) => {
                setResponses(prev => ({
                    ...prev,
                    [questionId]: value
                }));
            };

            const handleNext = () => {
                console.log('[HANDLE NEXT] Current step:', currentStep);
                console.log('[HANDLE NEXT] Total categories:', categories.length);
                console.log('[HANDLE NEXT] Categories:', categories);
                console.log('[HANDLE NEXT] Responses:', responses);

                if (currentStep < categories.length - 1) {
                    console.log('[HANDLE NEXT] Moving to next step...');
                    setCurrentStep(currentStep + 1);
                } else {
                    console.log('[HANDLE NEXT] Last step reached, calculating scores...');
                    const calculatedScores = calculateScores(responses);
                    console.log('[HANDLE NEXT] Calculated scores:', calculatedScores);
                    console.log('[HANDLE NEXT] Calling onComplete...');
                    // Clear saved progress when quiz is completed
                    localStorage.removeItem('quizProgress');
                    onComplete(responses, calculatedScores);
                }
            };

            const handlePrevious = () => {
                if (currentStep > 0) {
                    setCurrentStep(currentStep - 1);
                }
            };

            const isCurrentStepValid = () => {
                // Validate all required questions in the current section
                const isValid = currentQuestions.questions.every(question => {
                    const hasResponse = !question.required || responses[question.id];
                    console.log(`[VALIDATION] Question ${question.id}: required=${question.required}, hasResponse=${!!responses[question.id]}, valid=${hasResponse}`);
                    return hasResponse;
                });
                console.log(`[VALIDATION] Current step valid: ${isValid}`);
                return isValid;
            };

            return (
                <div className="min-h-screen bg-mist py-12 px-4">
                    {/* Progress Bar - Fixed at top */}
                    <div className="fixed top-0 left-0 right-0 h-1.5 bg-gray-200 z-50">
                        <div
                            className="h-full bg-fern transition-all duration-300 ease-out"
                            style={{ width: `${progress}%` }}
                        ></div>
                    </div>

                    {/* Motivation Toast - Halfway Point */}
                    {showMotivationToast && (
                        <div className="fixed top-8 left-1/2 transform -translate-x-1/2 z-50 animate-fade-in-down">
                            <div className="px-6 py-4 rounded-lg shadow-lg border-2" style={{
                                backgroundColor: '#EFF5F5',
                                borderColor: '#607D3B'
                            }}>
                                <div className="flex items-center gap-3">
                                    <svg className="w-6 h-6 flex-shrink-0" style={{color: '#607D3B'}} fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                                    </svg>
                                    <p className="text-base font-manrope font-medium" style={{color: '#37474F'}}>
                                        Great progress — our AI is already preparing your personalized report.
                                    </p>
                                </div>
                            </div>
                        </div>
                    )}

                    <div className="max-w-4xl mx-auto">
                        {/* Small Header */}
                        <div className="text-center mb-6">
                            <p className="text-sm text-gray-600 font-manrope font-medium">Risk Assessment Quiz</p>
                        </div>

                        {/* Main Card */}
                        <div className="bg-white rounded-2xl shadow-lg p-8 md:p-12">
                            {/* Eyebrow Label */}
                            <div className="text-center mb-6">
                                <p className="text-xs md:text-sm text-gray-400 font-manrope font-medium uppercase tracking-wider">
                                    Transaction Risk Assessment
                                </p>
                            </div>

                            {/* Question - HERO */}
                            <div className="text-center mb-12">
                                <h1 className="text-4xl md:text-5xl lg:text-6xl text-gray-800 font-bebas text-center mb-4 uppercase tracking-wide leading-tight">
                                    {currentQuestions.questions[0].label}
                                </h1>
                                {currentQuestions.questions[0].subtext && (
                                    <p className="text-sm md:text-base text-gray-500 mt-4 font-manrope italic">
                                        {currentQuestions.questions[0].subtext}
                                    </p>
                                )}
                            </div>

                            {/* Answer Area */}
                            <div className="max-w-3xl mx-auto mb-12">
                                {/* Text Input */}
                                {currentQuestions.questions[0].type === 'text' && (
                                    <input
                                        type="text"
                                        className="w-full px-6 py-4 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-fern focus:border-fern font-manrope text-lg text-gray-800 text-center"
                                        placeholder={
                                            currentQuestions.questions[0].id === 'company_name' ? 'Enter your brokerage name...' :
                                            currentQuestions.questions[0].id === 'location' ? 'Enter your market of operation...' :
                                            'Enter your answer...'
                                        }
                                        value={responses[currentQuestions.questions[0].id] || ''}
                                        onChange={(e) => handleInputChange(currentQuestions.questions[0].id, e.target.value)}
                                        required={currentQuestions.questions[0].required}
                                    />
                                )}

                                {/* Card Grid */}
                                {currentQuestions.questions[0].type === 'cards' && (
                                    <div className="grid grid-cols-2 gap-4 max-w-2xl mx-auto">
                                        {currentQuestions.questions[0].options.map((option, index) => {
                                            const isSelected = responses[currentQuestions.questions[0].id] === option.value;
                                            const IconComponent = ({ icon }) => {
                                                const iconMap = {
                                                    user: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />,
                                                    shield: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />,
                                                    clipboard: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01" />,
                                                    users: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />,
                                                    question: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />,
                                                    'clock-fast': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />,
                                                    clock: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />,
                                                    'clock-medium': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />,
                                                    'clock-slow': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />,
                                                    'clock-alert': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />,
                                                    'document-check': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />,
                                                    'document-search': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />,
                                                    'document-text': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z" />,
                                                    'document-duplicate': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z" />,
                                                    exclamation: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />,
                                                    database: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 7v10c0 2.21 3.582 4 8 4s8-1.79 8-4V7M4 7c0 2.21 3.582 4 8 4s8-1.79 8-4M4 7c0-2.21 3.582-4 8-4s8 1.79 8 4m0 5c0 2.21-3.582 4-8 4s-8-1.79-8-4" />,
                                                    book: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253" />,
                                                    mail: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />,
                                                    phone: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" />,
                                                    chat: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z" />,
                                                    lightbulb: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />,
                                                    computer: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" />,
                                                    'chart-low': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2z" />,
                                                    'chart-mid-low': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />,
                                                    'chart-mid-high': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />,
                                                    'chart-high': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />,
                                                    robot: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 3v2m6-2v2M9 19v2m6-2v2M5 9H3m2 6H3m18-6h-2m2 6h-2M7 19h10a2 2 0 002-2V7a2 2 0 00-2-2H7a2 2 0 00-2 2v10a2 2 0 002 2zM9 9h6v6H9V9z" />,
                                                    calendar: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />,
                                                    'alert-high': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />,
                                                    'alert-medium': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />,
                                                    'alert-warning': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />,
                                                    scale: <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M3 6l3 1m0 0l-3 9a5.002 5.002 0 006.001 0M6 7l3 9M6 7l6-2m6 2l3-1m-3 1l-3 9a5.002 5.002 0 006.001 0M18 7l3 9m-3-9l-6-2m0-2v2m0 16V5m0 16H9m3 0h3" />,
                                                    'shield-check': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z" />,
                                                    'shield-lock': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />,
                                                    'check-circle': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />,
                                                    'eye-off': <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21" />
                                                };
                                                return (
                                                    <svg className="w-8 h-8" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                        {iconMap[icon]}
                                                    </svg>
                                                );
                                            };

                                            return (
                                                <button
                                                    key={option.value}
                                                    onClick={() => handleInputChange(currentQuestions.questions[0].id, option.value)}
                                                    className={`group relative p-6 rounded-xl border-2 transition-all hover:shadow-md col-span-1 ${
                                                        isSelected
                                                            ? 'border-fern'
                                                            : 'border-sea-glass hover:border-river-stone'
                                                    }`}
                                                    style={isSelected ? {backgroundColor: 'rgba(96, 125, 59, 0.08)'} : {}}
                                                    onMouseEnter={(e) => {
                                                        if (!isSelected) {
                                                            e.currentTarget.style.backgroundColor = '#F5F7F7';
                                                        }
                                                    }}
                                                    onMouseLeave={(e) => {
                                                        if (!isSelected) {
                                                            e.currentTarget.style.backgroundColor = 'white';
                                                        }
                                                    }}
                                                >
                                                    {/* Checkmark Circle */}
                                                    <div className="absolute top-4 right-4">
                                                        {isSelected ? (
                                                            <div className="w-6 h-6 rounded-full bg-fern flex items-center justify-center">
                                                                <svg className="w-4 h-4 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                                                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={3} d="M5 13l4 4L19 7" />
                                                                </svg>
                                                            </div>
                                                        ) : (
                                                            <div className="w-6 h-6 rounded-full border-2 border-sea-glass"></div>
                                                        )}
                                                    </div>

                                                    {/* Icon */}
                                                    <div className={`w-12 h-12 rounded-lg flex items-center justify-center mb-4 transition-colors ${
                                                        isSelected
                                                            ? 'bg-fern text-white'
                                                            : 'bg-transparent text-storm-gray group-hover:text-river-stone'
                                                    }`}>
                                                        <IconComponent icon={option.icon} />
                                                    </div>

                                                    {/* Label */}
                                                    <div className="text-left">
                                                        <h3 className="text-lg font-bold text-gray-800 mb-1 font-manrope">{option.label}</h3>
                                                        <p className="text-sm text-gray-600 font-manrope">{option.description}</p>
                                                    </div>
                                                </button>
                                            );
                                        })}
                                    </div>
                                )}

                                {/* Select (rendered as checkbox list for consistency) */}
                                {currentQuestions.questions[0].type === 'select' && (
                                    <div className="space-y-3">
                                        {currentQuestions.questions[0].options.map((option, index) => {
                                            const isSelected = responses[currentQuestions.questions[0].id] === option;
                                            return (
                                                <button
                                                    key={option}
                                                    onClick={() => handleInputChange(currentQuestions.questions[0].id, option)}
                                                    className={`w-full text-left p-4 rounded-lg border-2 transition-all hover:shadow-sm ${
                                                        isSelected
                                                            ? 'border-fern'
                                                            : 'border-sea-glass hover:border-river-stone'
                                                    }`}
                                                    style={isSelected ? {backgroundColor: 'rgba(96, 125, 59, 0.08)'} : {}}
                                                    onMouseEnter={(e) => {
                                                        if (!isSelected) {
                                                            e.currentTarget.style.backgroundColor = '#F5F7F7';
                                                        }
                                                    }}
                                                    onMouseLeave={(e) => {
                                                        if (!isSelected) {
                                                            e.currentTarget.style.backgroundColor = 'white';
                                                        }
                                                    }}
                                                >
                                                    <div className="flex items-center gap-3">
                                                        {/* Radio Circle */}
                                                        <div className="flex-shrink-0">
                                                            {isSelected ? (
                                                                <div className="w-5 h-5 rounded-full bg-fern flex items-center justify-center">
                                                                    <div className="w-2 h-2 rounded-full bg-white"></div>
                                                                </div>
                                                            ) : (
                                                                <div className="w-5 h-5 rounded-full border-2 border-sea-glass"></div>
                                                            )}
                                                        </div>
                                                        {/* Text */}
                                                        <span className="text-gray-800 font-manrope">{option}</span>
                                                    </div>
                                                </button>
                                            );
                                        })}
                                    </div>
                                )}

                                {/* Checkbox List */}
                                {currentQuestions.questions[0].type === 'checkbox' && (
                                    <div className="space-y-3">
                                        {currentQuestions.questions[0].options.map((option, index) => {
                                            const isSelected = responses[currentQuestions.questions[0].id] === option;
                                            return (
                                                <button
                                                    key={option}
                                                    onClick={() => handleInputChange(currentQuestions.questions[0].id, option)}
                                                    className={`w-full text-left p-4 rounded-lg border-2 transition-all hover:shadow-sm ${
                                                        isSelected
                                                            ? 'border-fern'
                                                            : 'border-sea-glass hover:border-river-stone'
                                                    }`}
                                                    style={isSelected ? {backgroundColor: 'rgba(96, 125, 59, 0.08)'} : {}}
                                                    onMouseEnter={(e) => {
                                                        if (!isSelected) {
                                                            e.currentTarget.style.backgroundColor = '#F5F7F7';
                                                        }
                                                    }}
                                                    onMouseLeave={(e) => {
                                                        if (!isSelected) {
                                                            e.currentTarget.style.backgroundColor = 'white';
                                                        }
                                                    }}
                                                >
                                                    <div className="flex items-center gap-3">
                                                        {/* Radio Circle */}
                                                        <div className="flex-shrink-0">
                                                            {isSelected ? (
                                                                <div className="w-5 h-5 rounded-full bg-fern flex items-center justify-center">
                                                                    <div className="w-2 h-2 rounded-full bg-white"></div>
                                                                </div>
                                                            ) : (
                                                                <div className="w-5 h-5 rounded-full border-2 border-sea-glass"></div>
                                                            )}
                                                        </div>
                                                        {/* Text */}
                                                        <span className="text-gray-800 font-manrope">{option}</span>
                                                    </div>
                                                </button>
                                            );
                                        })}
                                    </div>
                                )}
                            </div>

                            {/* Navigation */}
                            <div className="flex justify-between items-center pt-8 border-t border-gray-200">
                                <button
                                    onClick={handlePrevious}
                                    disabled={currentStep === 0}
                                    className="flex items-center gap-2 text-spruce font-manrope font-medium disabled:opacity-0 disabled:cursor-not-allowed hover:text-spruce-dark transition-colors"
                                >
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
                                    </svg>
                                    Back
                                </button>
                                <button
                                    onClick={handleNext}
                                    disabled={!isCurrentStepValid()}
                                    className="flex items-center gap-2 bg-spruce text-white px-8 py-3 rounded-lg font-manrope font-semibold hover:bg-spruce-dark disabled:opacity-50 disabled:cursor-not-allowed transition-all"
                                >
                                    {currentStep === categories.length - 1 ? 'Submit' : 'Next'}
                                    <svg className="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                                    </svg>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            );
        };

        // Report Component
        const ReportView = ({ responses, scores }) => {
            const [email, setEmail] = useState('');
            const [emailCaptured, setEmailCaptured] = useState(false);
            const chartRef = useRef(null);
            const radarChartRef = useRef(null);

            useEffect(() => {
                if (chartRef.current) {
                    const ctx = chartRef.current.getContext('2d');
                    new Chart(ctx, {
                        type: 'doughnut',
                        data: {
                            datasets: [{
                                data: [scores.overall, 100 - scores.overall],
                                backgroundColor: [
                                    scores.overall >= 85 ? '#607D3B' :
                                    scores.overall >= 70 ? '#F59E0B' :
                                    scores.overall >= 50 ? '#F59E0B' :
                                    '#CC0000',
                                    '#9DBFBF'
                                ],
                                borderWidth: 0
                            }]
                        },
                        options: {
                            circumference: 180,
                            rotation: 270,
                            cutout: '75%',
                            plugins: {
                                legend: { display: false },
                                tooltip: { enabled: false }
                            }
                        }
                    });
                }

                if (radarChartRef.current) {
                    const ctx = radarChartRef.current.getContext('2d');
                    new Chart(ctx, {
                        type: 'radar',
                        data: {
                            labels: [
                                'Transaction Oversight',
                                'Operational Systems',
                                'Knowledge Management',
                                'Client Experience',
                                'Risk Management'
                            ],
                            datasets: [{
                                label: 'Your Score',
                                data: [
                                    scores.transactionOversight,
                                    scores.operationalSystems,
                                    scores.knowledgeManagement,
                                    scores.clientExperience,
                                    scores.riskManagement
                                ],
                                backgroundColor: 'rgba(120, 144, 156, 0.2)',
                                borderColor: 'rgb(120, 144, 156)',
                                pointBackgroundColor: 'rgb(120, 144, 156)',
                                pointBorderColor: '#fff',
                                pointHoverBackgroundColor: '#fff',
                                pointHoverBorderColor: 'rgb(120, 144, 156)'
                            }, {
                                label: 'Top 5% Benchmark',
                                data: [95, 95, 95, 95, 60],
                                backgroundColor: 'rgba(96, 125, 59, 0.2)',
                                borderColor: 'rgb(96, 125, 59)',
                                pointBackgroundColor: 'rgb(96, 125, 59)',
                                pointBorderColor: '#fff',
                                pointHoverBackgroundColor: '#fff',
                                pointHoverBorderColor: 'rgb(96, 125, 59)'
                            }]
                        },
                        options: {
                            scales: {
                                r: {
                                    beginAtZero: true,
                                    max: 100
                                }
                            }
                        }
                    });
                }
            }, [scores]);

            const handleEmailSubmit = async (e) => {
                e.preventDefault();

                console.log('[EMAIL SUBMIT] Starting submission...');
                console.log('[EMAIL SUBMIT] Email:', email);
                console.log('[EMAIL SUBMIT] Responses:', responses);
                console.log('[EMAIL SUBMIT] Scores:', scores);

                try {
                    const assessmentData = {
                        companyInfo: {
                            company_name: responses.company_name,
                            agent_count: responses.agent_count,
                            monthly_deals: responses.monthly_deals,
                            location: responses.location
                        },
                        responses,
                        scores,
                        timestamp: new Date().toISOString()
                    };

                    console.log('[EMAIL SUBMIT] Calling /api/assessment-submit...');
                    const submitResponse = await fetch('/api/assessment-submit', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(assessmentData)
                    });

                    if (!submitResponse.ok) {
                        const errorText = await submitResponse.text();
                        console.error('[EMAIL SUBMIT] Assessment submit failed:', errorText);
                        throw new Error('Failed to save assessment');
                    }

                    const submitResult = await submitResponse.json();
                    console.log('[EMAIL SUBMIT] Submit result:', submitResult);
                    const assessmentId = submitResult.assessmentId;

                    const emailData = {
                        email,
                        assessmentId,
                        reportData: {
                            companyName: responses.company_name,
                            brokerageSize: responses.agent_count,
                            city: responses.location,
                            overallScore: scores.overall,
                            riskLevel: scores.riskLevel,
                            monthlyTransactions: responses.monthly_deals
                        }
                    };

                    console.log('[EMAIL SUBMIT] Calling /api/email-capture...');
                    const emailResponse = await fetch('/api/email-capture', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(emailData)
                    });

                    if (!emailResponse.ok) {
                        const errorText = await emailResponse.text();
                        console.error('[EMAIL SUBMIT] Email capture failed:', errorText);
                        throw new Error('Failed to capture email');
                    }

                    window.assessmentId = assessmentId;
                    window.reportUrl = `${window.location.origin}/report.html?id=${assessmentId}`;

                    console.log('[EMAIL SUBMIT] Success! Redirecting to:', window.reportUrl);

                    // Redirect to comprehensive AI report
                    window.location.href = window.reportUrl;

                } catch (error) {
                    console.error('[EMAIL SUBMIT] Error submitting assessment:', error);
                    alert('There was an error saving your assessment. Please try again.');
                }
            };

            const gaps = [
                { name: 'Transaction Oversight', score: scores.transactionOversight, max: 100 },
                { name: 'Operational Systems', score: scores.operationalSystems, max: 100 },
                { name: 'Knowledge Management', score: scores.knowledgeManagement, max: 100 },
                { name: 'Client Experience', score: scores.clientExperience, max: 100 },
                { name: 'Risk Management', score: scores.riskManagement, max: 67 }
            ].sort((a, b) => (a.score/a.max) - (b.score/b.max)).slice(0, 3);

            return (
                <div className="min-h-screen bg-mist py-8">
                    <div className="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8">
                        <div className="bg-white rounded-lg shadow-lg p-8 mb-6">
                            <div className="text-center mb-8">
                                <h1 className="text-4xl font-bebas text-gray-800 mb-2 tracking-wide">
                                    Risk Assessment Report
                                </h1>
                                <p className="text-xl font-manrope font-semibold text-gray-700">
                                    {responses.company_name || 'Your Brokerage'}
                                </p>
                            </div>

                            <div className="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                                <div className="text-center">
                                    <h2 className="text-2xl font-manrope font-bold text-gray-800 mb-4">Overall Score</h2>
                                    <div className="relative inline-block">
                                        <canvas ref={chartRef} width="250" height="150"></canvas>
                                        <div className="absolute inset-0 flex items-center justify-center mt-8">
                                            <div>
                                                <div className="text-5xl font-jetbrains font-bold text-gray-800">{scores.overall}</div>
                                                <div className="text-sm font-manrope text-gray-600">out of 100</div>
                                            </div>
                                        </div>
                                    </div>
                                    <div className={`mt-4 inline-block px-4 py-2 rounded-full text-white font-manrope font-semibold ${
                                        scores.riskLevel === 'LOW' ? 'bg-lime-green' :
                                        scores.riskLevel === 'MODERATE' ? 'bg-amber' :
                                        scores.riskLevel === 'HIGH' ? 'bg-amber' : 'bg-signal-red'
                                    }`}>
                                        Risk Level: {scores.riskLevel}
                                    </div>
                                </div>

                                <div>
                                    <h2 className="text-2xl font-manrope font-bold text-gray-800 mb-4">Performance Breakdown</h2>
                                    <canvas ref={radarChartRef} width="300" height="300"></canvas>
                                </div>
                            </div>
                        </div>

                        <div className="bg-white rounded-lg shadow-lg p-8 mb-6 border-2 border-red-500">
                            <div className="text-center">
                                <div className="text-5xl mb-4">⚠️</div>
                                <h2 className="text-3xl font-bebas text-red-600 mb-4 tracking-wide">
                                    We Identified {gaps.length} Critical Operational Gaps
                                </h2>
                                <p className="text-xl font-manrope text-gray-700 mb-2">
                                    These inefficiencies are costing your brokerage an estimated{' '}
                                    <span className="font-bold text-red-600 font-jetbrains">
                                        ${scores.overall < 50 ? '127,000' : scores.overall < 70 ? '85,000' : '50,000'}+
                                    </span>{' '}
                                    per year in wasted time, missed deals, and liability exposure.
                                </p>
                                <p className="text-lg font-manrope text-gray-600">
                                    Your complete report reveals exactly what's causing these gaps and how top brokerages have eliminated them.
                                </p>
                            </div>
                        </div>

                        {!emailCaptured ? (
                            <div className="bg-gradient-to-br from-dark-green to-forest-green rounded-lg shadow-2xl p-10 mb-6 text-white">
                                <div className="text-center max-w-4xl mx-auto">
                                    <h2 className="text-4xl md:text-5xl font-bebas mb-4 tracking-wide leading-tight">
                                        Want to See Your Full Report and How Top Brokerages Are Saving $50,000+/Year Using Technology?
                                    </h2>
                                    <p className="text-xl font-manrope mb-8 text-white/90">
                                        Discover the exact systems and capabilities your brokerage can integrate within the next 30-90 days to eliminate inefficiencies and scale profitably.
                                    </p>

                                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8 text-left">
                                        <div className="bg-white/10 backdrop-blur rounded-lg p-5 border border-white/20">
                                            <div className="text-3xl mb-3">🎯</div>
                                            <h3 className="font-bold text-lg mb-2">Detailed Gap Analysis</h3>
                                            <p className="text-sm text-white/80">See exactly what's broken, why it matters, and the hidden costs</p>
                                        </div>
                                        <div className="bg-white/10 backdrop-blur rounded-lg p-5 border border-white/20">
                                            <div className="text-3xl mb-3">🗺️</div>
                                            <h3 className="font-bold text-lg mb-2">30-90 Day Roadmap</h3>
                                            <p className="text-sm text-white/80">Prioritized action plan with quick wins and transformational changes</p>
                                        </div>
                                        <div className="bg-white/10 backdrop-blur rounded-lg p-5 border border-white/20">
                                            <div className="text-3xl mb-3">💰</div>
                                            <h3 className="font-bold text-lg mb-2">ROI Projections</h3>
                                            <p className="text-sm text-white/80">Quantified savings based on your brokerage's actual operations</p>
                                        </div>
                                    </div>

                                    <form onSubmit={handleEmailSubmit} className="max-w-2xl mx-auto">
                                        <div className="bg-white rounded-lg p-2 shadow-xl flex flex-col sm:flex-row gap-2">
                                            <input
                                                type="email"
                                                value={email}
                                                onChange={(e) => setEmail(e.target.value)}
                                                placeholder="Enter your work email to unlock your full report"
                                                required
                                                className="flex-1 px-6 py-4 border-0 rounded-md focus:outline-none focus:ring-2 focus:ring-fern font-manrope text-lg text-gray-800"
                                            />
                                            <button
                                                type="submit"
                                                className="px-8 py-4 bg-red-600 text-white font-manrope font-bold rounded-md hover:bg-red-700 transition-colors text-lg whitespace-nowrap shadow-lg"
                                            >
                                                Get My Full Report →
                                            </button>
                                        </div>
                                    </form>

                                    <div className="mt-6 flex flex-wrap items-center justify-center gap-6 text-sm text-white/80">
                                        <div className="flex items-center gap-2">
                                            <span>✓</span>
                                            <span>Instant access (no wait)</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <span>✓</span>
                                            <span>No credit card required</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <span>✓</span>
                                            <span>Based on 1,000+ assessments</span>
                                        </div>
                                        <div className="flex items-center gap-2">
                                            <span>🔒</span>
                                            <span>Your data is 100% secure</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ) : (
                            <div className="bg-fern/10 border-2 border-fern rounded-lg p-6">
                                <h3 className="text-xl font-manrope font-bold mb-3 text-fern">✅ Report Saved!</h3>
                                <p className="font-manrope text-gray-700 mb-4">
                                    Your assessment has been saved. Check your email for the complete report.
                                </p>

                                {window.reportUrl && (
                                    <div className="bg-white border-2 border-gray-300 rounded-md p-4 mb-4">
                                        <p className="text-sm font-manrope font-medium text-gray-700 mb-2">Your Report URL:</p>
                                        <div className="flex items-center gap-2">
                                            <input
                                                type="text"
                                                value={window.reportUrl}
                                                readOnly
                                                className="flex-1 px-3 py-2 text-sm font-jetbrains bg-gray-50 border-2 border-gray-300 rounded"
                                            />
                                            <button
                                                onClick={() => {
                                                    navigator.clipboard.writeText(window.reportUrl);
                                                    alert('Report link copied to clipboard!');
                                                }}
                                                className="px-4 py-2 bg-gray-700 text-white text-sm font-manrope font-semibold rounded hover:bg-gray-800 transition-colors"
                                            >
                                                Copy
                                            </button>
                                        </div>
                                    </div>
                                )}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        // Main App Component
        const App = () => {
            const [currentView, setCurrentView] = useState('landing');
            const [responses, setResponses] = useState(null);
            const [scores, setScores] = useState(null);
            const [isGeneratingReport, setIsGeneratingReport] = useState(false);

            const handleStartAssessment = () => {
                setCurrentView('prequiz');
            };

            const handleStartQuiz = () => {
                setCurrentView('assessment');
            };

            const handleAssessmentComplete = async (assessmentResponses, assessmentScores) => {
                console.log('[ASSESSMENT COMPLETE] Starting immediate redirect flow...');
                console.log('[ASSESSMENT COMPLETE] Responses:', assessmentResponses);
                console.log('[ASSESSMENT COMPLETE] Scores:', assessmentScores);

                // Show loading screen
                setIsGeneratingReport(true);

                try {
                    // Extract company info and filter out from responses
                    const companyInfo = {
                        company_name: assessmentResponses.company_name,
                        agent_count: assessmentResponses.agent_count,
                        monthly_deals: assessmentResponses.monthly_deals,
                        location: assessmentResponses.location
                    };

                    // Filter responses to only include question answers (not company info)
                    const questionResponses = {};
                    Object.keys(assessmentResponses).forEach(key => {
                        if (!['company_name', 'agent_count', 'monthly_deals', 'location'].includes(key)) {
                            questionResponses[key] = assessmentResponses[key];
                        }
                    });

                    // Prepare assessment data for API submission
                    const assessmentData = {
                        companyInfo,
                        responses: questionResponses,
                        timestamp: new Date().toISOString()
                    };

                    console.log('[ASSESSMENT COMPLETE] Submitting to /api/assessment-submit...');
                    console.log('[ASSESSMENT COMPLETE] Assessment data:', assessmentData);

                    // Save assessment to database
                    const submitResponse = await fetch('/api/assessment-submit', {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(assessmentData)
                    });

                    if (!submitResponse.ok) {
                        const errorText = await submitResponse.text();
                        console.error('[ASSESSMENT COMPLETE] Assessment submit failed:', errorText);
                        throw new Error('Failed to save assessment');
                    }

                    const submitResult = await submitResponse.json();
                    console.log('[ASSESSMENT COMPLETE] Submit result:', submitResult);

                    // Get the shareable token from the response
                    const shareableToken = submitResult.shareableToken;
                    const reportUrl = `${window.location.origin}/report.html?id=${shareableToken}`;

                    console.log('[ASSESSMENT COMPLETE] Redirecting to:', reportUrl);

                    // Immediately redirect to new report design
                    window.location.href = reportUrl;

                } catch (error) {
                    console.error('[ASSESSMENT COMPLETE] Error saving assessment:', error);
                    alert('There was an error saving your assessment. Please try again.');

                    // Fallback: show embedded report if API fails
                    setResponses(assessmentResponses);
                    setScores(assessmentScores);
                    setCurrentView('report');
                }
            };

            // Loading screen while generating report
            if (isGeneratingReport) {
                const LoadingScreen = () => {
                    const [currentFactIndex, setCurrentFactIndex] = useState(0);
                    const [isFactVisible, setIsFactVisible] = useState(true);

                    const facts = [
                        "Misrepresentation of property condition consistently ranks as the number one E&O claim filed against real estate professionals nationwide.",
                        "Transaction coordinators reduce errors by 80% on average, saving brokerages thousands in potential E&O claims and rework costs.",
                        "Between 5-15% of residential purchase agreements fall through before closing, with missed contingency deadlines being a leading preventable cause.",
                        "Fifty percent of the nation's top-performing real estate brokerages employ transaction coordinators to improve oversight and reduce operational costs.",
                        "Agents working with transaction coordinators save 10-20 hours per transaction, freeing time to focus on revenue-generating client acquisition activities.",
                        "Inaccurate MLS data entry is the most frequently cited compliance violation, damaging brokerage credibility and exposing agents to fines.",
                        "Ninety-eight percent of agents who use transaction coordinators close more deals each month than agents managing transactions independently.",
                        "Failure to update listing status to 'Pending' or 'Sold' within 24-48 hours is one of the most common—and easily avoidable—MLS fines.",
                        "Financing issues remain the most prevalent reason home sales fail to reach closing, often due to preventable changes in buyer circumstances.",
                        "Seventy percent of agents who hire transaction coordinators report increased revenue and significant business growth within their first year.",
                        "Agents report an average 25% increase in productivity when working with transaction coordinators versus managing all administrative tasks themselves.",
                        "Sixteen percent of home purchase contracts experience delayed settlements, with appraisal issues accounting for over one-third of those delays nationwide.",
                        "Ninety-five percent of buyers and sellers report more confidence in transactions when a dedicated transaction coordinator is involved in the process.",
                        "Dual agency transactions carry significantly higher E&O claim risk due to increased potential for allegations of collusion, misrepresentation, or fraud.",
                        "Real estate agents owe fiduciary duties to ensure all contractual deadlines are met, and breach of these duties can result in lost transactions and legal liability.",
                        "Brokerages with ten or more full-time agents typically see immediate ROI from hiring transaction coordinators and implementing transaction management software.",
                        "Clear Cooperation Policy violations and late MLS submissions can result in automatic fines ranging from hundreds to thousands of dollars per violation.",
                        "Closings managed by transaction coordinators are completed 30% faster on average, reducing delays that frustrate clients and jeopardize referral business.",
                        "Seventy percent of brokerages report substantial cost savings when utilizing virtual transaction coordinators versus traditional in-office administrative staff."
                    ];

                    useEffect(() => {
                        const factInterval = setInterval(() => {
                            setIsFactVisible(false);
                            setTimeout(() => {
                                setCurrentFactIndex((prev) => (prev + 1) % facts.length);
                                setIsFactVisible(true);
                            }, 300);
                        }, 8000);

                        return () => clearInterval(factInterval);
                    }, []);

                    return (
                        <div className="min-h-screen flex flex-col" style={{
                            background: 'linear-gradient(to bottom, rgba(55, 71, 79, 0.7), rgba(245, 247, 247, 0.9))'
                        }}>
                            {/* Main Content - Centered */}
                            <div className="flex-1 flex items-center justify-center px-4 py-12">
                                <div className="max-w-2xl w-full text-center">
                                    {/* Main Card */}
                                    <div className="rounded-xl p-12 border" style={{
                                        backgroundColor: 'rgba(245, 247, 247, 0.6)',
                                        borderColor: 'rgba(157, 191, 191, 0.2)',
                                        backdropFilter: 'blur(8px)',
                                        boxShadow: '0 8px 32px rgba(0, 0, 0, 0.1)'
                                    }}>
                                        {/* AI Icon with Float Animation */}
                                        <div className="flex justify-center mb-8">
                                            <div className="text-6xl animate-float">
                                                🤖
                                            </div>
                                        </div>

                                        {/* Headline */}
                                        <h2 className="text-3xl md:text-4xl font-bebas uppercase tracking-wide mb-6" style={{color: '#37474F'}}>
                                            Generating Your AI-Powered Report
                                        </h2>

                                        {/* Sub-headline */}
                                        <p className="text-lg text-gray-600 font-manrope mb-8 max-w-lg mx-auto leading-relaxed">
                                            Our AI is analyzing your responses to prepare a personalized report with actionable insights…
                                        </p>

                                        {/* Rotating Facts - MOVED UP */}
                                        <div className="min-h-[140px] flex items-center justify-center py-6 mb-5">
                                            <div className="max-w-2xl mx-auto text-center">
                                                {/* "Did you know?" header - fixed */}
                                                <p className="font-bebas tracking-wide mb-3" style={{
                                                    fontSize: '20px',
                                                    color: '#607D3B',
                                                    letterSpacing: '0.5px'
                                                }}>
                                                    DID YOU KNOW?
                                                </p>
                                                {/* Rotating fact */}
                                                <div className="flex items-start justify-center gap-3">
                                                    {/* Optional subtle icon */}
                                                    <div className="flex-shrink-0 mt-1" style={{opacity: 0.5}}>
                                                        <svg className="w-5 h-5" style={{color: '#37474F'}} fill="currentColor" viewBox="0 0 20 20">
                                                            <path fillRule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clipRule="evenodd" />
                                                        </svg>
                                                    </div>
                                                    <p
                                                        className={`font-manrope transition-opacity duration-150 ${isFactVisible ? 'opacity-100' : 'opacity-0'}`}
                                                        style={{
                                                            fontSize: '18px',
                                                            fontWeight: 500,
                                                            color: 'rgba(55, 71, 79, 0.9)',
                                                            lineHeight: '1.55',
                                                            maxWidth: '640px',
                                                            textAlign: 'left'
                                                        }}
                                                    >
                                                        {facts[currentFactIndex]}
                                                    </p>
                                                </div>
                                            </div>
                                        </div>

                                        {/* Progress Dots - REDUCED & SUBTLE */}
                                        <div className="flex justify-center gap-1.5 mb-5">
                                            {facts.slice(0, 9).map((_, index) => (
                                                <div
                                                    key={index}
                                                    className="w-1.5 h-1.5 rounded-full transition-all duration-300"
                                                    style={{
                                                        backgroundColor: index === currentFactIndex % 9
                                                            ? '#607D3B'
                                                            : 'rgba(157, 191, 191, 0.25)'
                                                    }}
                                                ></div>
                                            ))}
                                        </div>

                                        {/* Estimated Time */}
                                        <p className="text-sm text-gray-500 font-manrope">
                                            This typically takes 30-60 seconds. Please don't close this window.
                                        </p>

                                        {/* Optional Micro Progress Bar */}
                                        <div className="mt-6 w-full max-w-md mx-auto h-0.5 rounded-full overflow-hidden" style={{backgroundColor: 'rgba(157, 191, 191, 0.2)'}}>
                                            <div className="h-full animate-progress" style={{backgroundColor: '#607D3B'}}></div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            {/* Bonus Offer Footer */}
                            <div className="sticky bottom-0 border-t" style={{
                                backgroundColor: 'rgba(255, 255, 255, 0.75)',
                                borderColor: 'rgba(157, 191, 191, 0.3)',
                                boxShadow: '0 -4px 12px rgba(0, 0, 0, 0.05)'
                            }}>
                                <div className="max-w-4xl mx-auto px-4 py-4 text-center">
                                    <p className="text-sm font-manrope" style={{color: '#37474F'}}>
                                        <span className="font-semibold">Bonus Opportunity for Brokers:</span>{' '}
                                        Ask us about performance-based leads you only pay for when they go under contract.{' '}
                                        <a
                                            href="mailto:contact@contrere.com"
                                            className="font-medium hover:underline transition-colors"
                                            style={{color: '#78909C'}}
                                        >
                                            Learn more
                                        </a>
                                    </p>
                                </div>
                            </div>
                        </div>
                    );
                };

                return <LoadingScreen />;
            }

            return (
                <div>
                    {currentView === 'landing' && (
                        <LandingPage onStartAssessment={handleStartAssessment} />
                    )}
                    {currentView === 'prequiz' && (
                        <BeforeYouBegin onStartQuiz={handleStartQuiz} />
                    )}
                    {currentView === 'assessment' && (
                        <AssessmentForm onComplete={handleAssessmentComplete} />
                    )}
                    {currentView === 'report' && (
                        <ReportView responses={responses} scores={scores} />
                    )}
                </div>
            );
        };

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
